!function(){"use strict";var t={};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),function(){function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function i(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var s=function(){function t(n,i,a){e(this,t),this.curX=0,this.curY=0,this.dynamicScroll=i.dynamic||!1,this.element=n,this.hasButtons=n.getElementsByTagName("button")||!1,this.horizontalSlide=i.slide||!1,this.index=0,this.initX=0,this.items=Array.from(n.getElementsByTagName("li")),this.itemsWidth=0,this.list=n.getElementsByTagName("ul")[0],this.listVisibleWidth=0,this.maxXOffset=0,this.minXOffset=0,this.nextButton=void 0,this.prevButton=void 0,this.scrollingDelay=parseInt(i.delay)||0,this.scrollingEffect=i.effect||"ease",this.scrollingOneByOne=i.scrollingOneByOne||!1,this.scrollingSpeed=parseInt(i.speed)||500,this.slideOffset=0,this.startX=0,this.startY=0,this.swipeDirection=0,this.titles=Array.from(n.getElementsByClassName("articleRibbon--list-title")),this.totalItemsWidth=0,this.useClick=i.click||!1,this.useTouch=i.touch||!1,this.uid=a}return i(t,[{key:"init",value:function(){switch(this.list.dataset.allowScrolling="true",!0===this.dynamicScroll?(this.scrollingOneByOne=!1,this.itemsWidth=this._measureCarousel()):this._measureCarousel(),this.useClick&&this.hasButtons.length>0&&this._navigationButtons(),this.useTouch&&"ontouchstart"in window&&(this.element.addEventListener("touchstart",this._handleTouchStart.bind(this),!1),this.element.addEventListener("touchmove",this._handleTouchMove.bind(this),!1),this.element.addEventListener("touchend",this._handleTouchEnd.bind(this),!1)),this.scrollingEffect){case"easeInBack":this.scrollingEffect="cubic-bezier(0.6, -0.28, 0.735, 0.045)";break;case"easeOutback":this.scrollingEffect="cubic-bezier(0.175, 0.885, 0.32, 1.275)";break;case"easeInOutBack":case"easeElastic":this.scrollingEffect="cubic-bezier(0.68, -0.55, 0.265, 1.55)";break;default:this.scrollingEffect="ease"}}},{key:"_between",value:function(t,e,n){return t>=e&&t<=n}},{key:"_btnClick",value:function(t){var e=parseInt(t.target.dataset.delta,10);this.horizontalSlide?this._slide(e):this._scrolling(e),window.dispatchEvent(new CustomEvent(this.uid,{bubbles:!0,detail:{refresh:"active"}}))}},{key:"_calculateAngle",value:function(){var t=this.startX-this.curX,e=this.curY-this.startY,n=Math.atan2(e,t);return this._swipeAngle=Math.round(180*n/Math.PI),this._swipeAngle<0&&(this._swipeAngle=360-Math.abs(this._swipeAngle)),this._swipeAngle<=45&&this._swipeAngle>=0||this._swipeAngle<=360&&this._swipeAngle>=315?this.swipeDirection=1:this._swipeAngle>=135&&this._swipeAngle<=225?this.swipeDirection=-1:this._swipeAngle>45&&this._swipeAngle<135?this.swipeDirection=2:this.swipeDirection=3,this.swipeDirection}},{key:"_checkNavButtonStatus",value:function(t){this.nextButton.disabled=t<=this.minXOffset,this.prevButton.disabled=t>=this.maxXOffset}},{key:"_clamp",value:function(t){return t<this.minXOffset?this.minXOffset:t>this.maxXOffset?this.maxXOffset:t}},{key:"_findClosestItemOffset",value:function(t,e){var n=this.items[0].getBoundingClientRect(),i=n.right,a=n.width,s=this.items[1].getBoundingClientRect().left-i,r=Math.abs(t)/(a+s);return 0-(1===e?Math.floor(r):Math.ceil(r))*(a+s)}},{key:"_getTotalItemsWidth",value:function(t){if(!(t.length<1)){var e=t[0].getBoundingClientRect().left;return t[t.length-1].getBoundingClientRect().right-e}}},{key:"_handleTouchStart",value:function(t){"true"===this.list.getAttribute("data-allow-scrolling")&&(this.startX=t.touches[0].pageX,this.startY=t.touches[0].pageY)}},{key:"_handleTouchMove",value:function(t){this._calculateAngle()<2&&(t.stopPropagation(),t.preventDefault()),this.curX=t.touches[0].pageX,this.curY=t.touches[0].pageY}},{key:"_handleTouchEnd",value:function(){var t=this;Math.abs(this.curX-this.startX)>this.items[0].offsetWidth/2?this._scrolling(this.swipeDirection):(this.list.setAttribute("data-allow-scrolling","false"),"undefined"!==this.list.style.transition?(this.list.style.transition="all "+this.scrollingSpeed+"ms "+this.scrollingEffect+" "+this.scrollingDelay+"ms",setTimeout((function(){t.list.style.transition="all 0ms",t.list.setAttribute("data-allow-scrolling","true")}),this.scrollingSpeed+this.scrollingDelay)):this.list.setAttribute("data-allow-scrolling","true"))}},{key:"_measureCarousel",value:function(){if(this.totalItemsWidth=this._getTotalItemsWidth(this.items),this.listVisibleWidth=this.list.offsetWidth,this.minXOffset=-(this.totalItemsWidth-this.listVisibleWidth),this.initX=this.list.getBoundingClientRect().x,!0===this.dynamicScroll){var t,e,n=[],i=function(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,s=function(){};return{s:s,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,l=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){l=!0,r=t},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw r}}}}(this.items);try{for(i.s();!(e=i.n()).done;){var s=e.value;n.push(s.offsetWidth)}}catch(t){i.e(t)}finally{i.f()}var r=n.map((function(e){return t=(t||0)+e}));return r.unshift(0),r}}},{key:"_navigationButtons",value:function(){this.prevButton=this.element.getElementsByTagName("button")[0],this.nextButton=this.element.getElementsByTagName("button")[1],this.prevButton.addEventListener("click",this._btnClick.bind(this),!1),this.nextButton.addEventListener("click",this._btnClick.bind(this),!1),this.listVisibleWidth===this.totalItemsWidth&&this.nextButton.classList.remove("show")}},{key:"_scrolling",value:function(t){var e=this,n=this.list.getBoundingClientRect().x-this.initX+-this.listVisibleWidth*t,i=this._clamp(n);i>0&&(i=0),n=n===i?this._findClosestItemOffset(n,t):i,this.list.dataset.allowScrolling="false","undefined"!==this.list.style.transition&&(this.list.style.transition="all "+this.scrollingSpeed+"ms "+this.scrollingEffect+" "+this.scrollingDelay+"ms"),1===t?(!0===this.scrollingOneByOne?(this.index=Math.min(this.index+1,this.items.length-1),this.list.style.transform="translateX(".concat(Math.max(-this.index*this.items[0].offsetWidth,this.minXOffset),"px)")):!0===this.dynamicScroll?(0===this.index?this.index=this.index+2:this.index=this.index+1,this.list.style.transform="translateX(".concat(-this.itemsWidth[this.index-1],"px)"),this.index>=this.items.length?(this.nextButton.classList.add("disabled"),2===this.items.length&&this.prevButton.classList.remove("disabled")):(this.nextButton.classList.remove("disabled"),this.prevButton.classList.remove("disabled"))):this.list.style.transform="translateX(".concat(Math.max(n,this.minXOffset),"px)"),"undefined"!==this.list.style.transition?setTimeout((function(){e.list.style.transition="all 0ms",e.list.dataset.allowScrolling="true"}),this.scrollingSpeed+this.scrollingDelay):this.list.dataset.allowScrolling="true"):-1===t&&(this.index=Math.max(0,this.index-1),!0===this.scrollingOneByOne?this.list.style.transform="translateX(".concat(Math.min(-this.index*this.items[0].offsetWidth,0),"px)"):!0===this.dynamicScroll?(this.list.style.transform="translateX(".concat(-this.itemsWidth[this.index-1],"px)"),1===this.index?(this.prevButton.classList.add("disabled"),2===this.items.length&&this.nextButton.classList.remove("disabled")):(this.prevButton.classList.remove("disabled"),this.nextButton.classList.remove("disabled"))):this.list.style.transform="translateX(".concat(Math.min(n,0),"px)"),"undefined"!==this.list.style.transition?setTimeout((function(){e.list.style.transition="all 0ms",e.list.setAttribute("data-allow-scrolling","true")}),this.scrollingSpeed+this.scrollingDelay):this.list.setAttribute("data-allow-scrolling","true")),!0!==this.dynamicScroll&&this._checkNavButtonStatus(n)}},{key:"_slide",value:function(t){var e=function(t,e){return t.classList.contains(e)};1===t?(this.slideOffset+=this.listVisibleWidth,this._slideLeft(this.list,this.slideOffset,this.scrollingSpeed),this.listVisibleWidth+this.slideOffset>this.totalItemsWidth?e(this.nextButton,"show")&&this.nextButton.classList.remove("show"):e(this.nextButton,"show")||this.nextButton.classList.add("show"),e(this.prevButton,"show")||this.prevButton.classList.add("show")):(this.slideOffset+=-1*this.listVisibleWidth,this._slideLeft(this.list,this.slideOffset,this.scrollingSpeed),this._between(this.list.scrollLeft,0,this.listVisibleWidth)?e(this.prevButton,"show")&&this.prevButton.classList.remove("show"):e(this.prevButton,"show")||this.prevButton.classList.add("show"),e(this.nextButton,"show")||this.nextButton.classList.add("show"))}},{key:"_slideLeft",value:function(t,e,n){var i=t.scrollLeft,a=e-i,s=0;Math.easeInOutQuad=function(t,e,n,i){return(t/=i/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e},function e(){s+=20;var r=Math.easeInOutQuad(s,i,a,n);t.scrollLeft=r,s<n&&setTimeout(e,20)}()}}]),t}(),r=function(){function t(n,i,a){e(this,t),this.title={body:n||"---",background:i||"#8b0000",color:a||"#ffffff"}}return i(t,[{key:"_convertTimestamp",value:function(t){var e=function(t){return t<10?"0".concat(t):t};return"".concat(e(t.getHours()),":").concat(e(t.getMinutes()),":").concat(e(t.getSeconds()),":").concat(e(t.getMilliseconds()))}},{key:"log",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";console.log("%c".concat(this.title.body,"%c").concat(this._convertTimestamp(new Date)," - ").concat(t),"color: ".concat(this.title.color,"; font-weight: 600; font-size: 0.625rem; background-color: ").concat(this.title.background,"; padding: 3px 4px 2px 4px; border-radius: 2px; margin-right: 8px"),"color: #0000000; font-weight: $400; font-size: 0.625rem; background-color: transparent;")}},{key:"error",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";console.error("%c".concat(this.title.body,"%c").concat(this._convertTimestamp(new Date)," - ").concat(t),"color: ".concat(this.title.color,"; font-weight: 600; font-size: 0.625rem; background-color: #8b0000; padding: 3px 4px 2px 4px; border-radius: 2px; margin-right: 8px"),"color: #0000000; font-weight: 400; font-size: 0.625rem; background-color: transparent;")}},{key:"warn",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";console.warn("%c".concat(this.title.body,"%c").concat(this._convertTimestamp(new Date)," - ").concat(t),"color: ".concat(this.title.color,"; font-weight: 600; font-size: 0.625rem; background-color: #ffa500; padding: 3px 4px 2px 4px; border-radius: 2px; margin-right: 8px"),"color: #0000000; font-weight: 400; font-size: 0.625rem; background-color: transparent;")}}]),t}();function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function l(t){var e,n=function(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,a=function(){};return{s:a,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,r=!0,l=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return r=t.done,t},e:function(t){l=!0,s=t},f:function(){try{r||null==n.return||n.return()}finally{if(l)throw s}}}}(window.location.search.substring(1).split("&"));try{for(n.s();!(e=n.n()).done;){var i=e.value.split("=");if(decodeURIComponent(i[0])===t)return decodeURIComponent(i[1])}}catch(t){n.e(t)}finally{n.f()}}function c(t,e){e.parentNode.insertBefore(t,e.nextSibling)}function d(t,e){if(t){var n,i=document.body||document.getElementsByTagName("body")[0];e?((n=document.createElement("link")).rel="stylesheet",n.href=t):((n=document.createElement("style")).type="text/css",n.innerText=t),i.appendChild(n)}}function u(t,e){return new Promise((function(n,i){var a=document.createElement("script");a.onload=function(){n(t)},a.onerror=function(){i(t)},-1!==t.indexOf("sendtonews")?a.dataset.type="s2nScript":-1!==t.indexOf("sail-horizon")&&(a.dataset.sailthruSetup="true"),e&&(a.id=e),a.src=t,document.body.appendChild(a)}))}function h(t){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){"object"===h(e)?window.dispatchEvent(new CustomEvent(t,{bubbles:!0,detail:e})):console.warn("Could not send message...")}function m(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return g(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,a=function(){};return{s:a,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,r=!0,o=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return r=t.done,t},e:function(t){o=!0,s=t},f:function(){try{r||null==n.return||n.return()}finally{if(o)throw s}}}}function g(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var p=function(){function t(n,i,a){var s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:document.body;e(this,t),this.items=n,this.classname=i,this.continuous=r,this.bounds=a,this.placeSentinels=s,this.root=o,window["_"+this.classname+"CollectionContainer"]=[],this.collectionContainer=window["_"+this.classname+"CollectionContainer"]}return i(t,[{key:"init",value:function(){this._findElementsInView(this.items)}},{key:"_findElementsInView",value:function(t){var e=this,n=new IntersectionObserver((function(t,n){var i,a,s,r,o=m(t);try{for(o.s();!(i=o.n()).done;){var l=i.value;if(l.isIntersecting){var c=(a={},s=e.classname,r={element:l.target,continuous:e.continuous},s in a?Object.defineProperty(a,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[s]=r,a);e.collectionContainer&&e.collectionContainer.push(c),f("TOWNHALL",c),e.continuous||n.unobserve(l.target)}}}catch(t){o.e(t)}finally{o.f()}}),{threshold:[0],rootMargin:this.bounds});if(this.placeSentinels){var i,a=m(this._addSentinels(t,this.classname));try{for(a.s();!(i=a.n()).done;){var s=i.value;n.observe(s)}}catch(t){a.e(t)}finally{a.f()}}else if("object"===h(t)&&"length"in t){var r,o=m(t);try{for(o.s();!(r=o.n()).done;){var l=r.value;n.observe(l)}}catch(t){o.e(t)}finally{o.f()}}else n.observe(t)}},{key:"_addSentinels",value:function(t,e){var n=this;return t.map((function(t,i){var a=document.createElement("div");return a.classList.add("sentinel"),a.dataset.type=e,a.dataset.index=i,a.style.top="".concat(t).indexOf("%")>0?"".concat(t):"".concat(t,"px"),n.root.appendChild(a)}))}},{key:"_refresh",value:function(t){this._findElementsInView(t)}}]),t}();function v(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return y(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,a=function(){};return{s:a,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,r=!0,o=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return r=t.done,t},e:function(t){o=!0,s=t},f:function(){try{r||null==n.return||n.return()}finally{if(o)throw s}}}}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function b(t){!function(e){try{t.classList.add("fade-in");var n,i=v(t.children);try{for(i.s();!(n=i.n()).done;){var a=n.value;a.hasAttribute("data-srcset")&&(a.srcset=a.dataset.srcset),a.hasAttribute("data-src")&&(a.src=a.dataset.src)}}catch(t){i.e(t)}finally{i.f()}!function(){t.classList.remove("deferred"),t.removeAttribute("data-progressive"),t.removeAttribute("data-component");var e,n=v(t.children);try{for(n.s();!(e=n.n()).done;){var i=e.value;i.hasAttribute("data-srcset")&&i.removeAttribute("data-srcset"),i.hasAttribute("data-src")&&i.removeAttribute("data-src")}}catch(t){n.e(t)}finally{n.f()}}()}catch(t){console.error(t)}}()}function w(t){t.parentNode.removeChild(t)}function E(t){var e;return e=t,function(t){return function n(i){i!==e&&(t(i),n(i+1))}(0)}}var L="Expected a function",_=/^\s+|\s+$/g,k=/^[-+]0x[0-9a-f]+$/i,S=/^0b[01]+$/i,A=/^0o[0-7]+$/i,I=parseInt,x="object"===(void 0===t.g?"undefined":h(t.g))&&t.g&&t.g.Object===Object&&t.g,B="object"===("undefined"==typeof self?"undefined":h(self))&&self&&self.Object===Object&&self,T=x||B||Function("return this")(),O=Object.prototype.toString,N=Math.max,C=Math.min,M=function(){return T.Date.now()};function H(t){var e=h(t);return!!t&&("object"==e||"function"==e)}function j(t){if("number"==typeof t)return t;if(function(t){return"symbol"===h(t)||function(t){return!!t&&"object"===h(t)}(t)&&"[object Symbol]"==O.call(t)}(t))return NaN;if(H(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=H(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(_,"");var n=S.test(t);return n||A.test(t)?I(t.slice(2),n?2:8):k.test(t)?NaN:+t}function R(){function t(){var t=.01*window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(t,"px"))}t(),window.addEventListener("resize",function(t,e,n){var i=!0,a=!0;if("function"!=typeof t)throw new TypeError(L);return H(n)&&(i="leading"in n?!!n.leading:i,a="trailing"in n?!!n.trailing:a),function(t,e,n){var i,a,s,r,o,l,c=0,d=!1,u=!1,h=!0;if("function"!=typeof t)throw new TypeError(L);function f(e){var n=i,s=a;return i=a=void 0,c=e,r=t.apply(s,n)}function m(t){return c=t,o=setTimeout(p,e),d?f(t):r}function g(t){var n=t-l;return void 0===l||n>=e||n<0||u&&t-c>=s}function p(){var t=M();if(g(t))return v(t);o=setTimeout(p,function(t){var n=e-(t-l);return u?C(n,s-(t-c)):n}(t))}function v(t){return o=void 0,h&&i?f(t):(i=a=void 0,r)}function y(){var t=M(),n=g(t);if(i=arguments,a=this,l=t,n){if(void 0===o)return m(l);if(u)return o=setTimeout(p,e),f(l)}return void 0===o&&(o=setTimeout(p,e)),r}return e=j(e)||0,H(n)&&(d=!!n.leading,s=(u="maxWait"in n)?N(j(n.maxWait)||0,e):s,h="trailing"in n?!!n.trailing:h),y.cancel=function(){void 0!==o&&clearTimeout(o),c=0,i=l=a=o=void 0},y.flush=function(){return void 0===o?r:v(M())},y}(t,200,{leading:i,maxWait:200,trailing:a})}(t),!1)}function W(t){var e=document.body||document.getElementsByTagName("body")[0];if(t)document.body.dataset.y=window.pageYOffset,e.classList.add("noScroll");else{var n=parseFloat(document.body.dataset.y);n!==window.pageYOffset&&window.scroll(0,n),e.classList.remove("noScroll"),document.body.removeAttribute("data-y")}}function P(t,e){return(P=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function D(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&P(t,e)}function X(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function U(t,e){return!e||"object"!==h(e)&&"function"!=typeof e?X(t):e}function F(t){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var q=new r("REFRESH","#3cb371","#ffffff"),V=function(){function t(n,i,a){e(this,t),this.counterI=!1,this.counterP=!1,this.counterS=!1,this.debug=i,this.interval=n,this.iWorker=void 0,this.uid=a}return i(t,[{key:"init",value:function(){var t=this;window.addEventListener(this.uid,(function(e){"active"===e.detail.refresh&&t._refreshActive(),"interactive"===e.detail.refresh&&t._refreshInteractive()})),window.addEventListener("scroll",(function(e){t._refreshScroll("Event is:",e)})),this._refreshPassive()}},{key:"_refreshActive",value:function(){this.counterS||(this._stopWorker(),this.counterS=!0,this._startWorker(this.interval[2],"scroll"))}},{key:"_refreshInteractive",value:function(){this.counterI||(this._stopWorker(),this.counterI=!0,this._startWorker(this.interval[0],"interactive"))}},{key:"_refreshPassive",value:function(){this.counterP||(this._stopWorker(),this.counterP=!0,this._startWorker(this.interval[1],"passive"))}},{key:"_refreshScroll",value:function(){var t,e,n=this;(t=function(t,e){n.counterS||(n._stopWorker(),n.counterS=!0,n._startWorker(n.interval[2],"scroll"))},100,e=null,function(){for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];var s=function(){return t.apply(void 0,i)};clearTimeout(e),e=setTimeout(s,100)})()}},{key:"_startWorker",value:function(t,e){var n=this;this.debug&&q.log("Started ".concat(e," refresh interval")),"undefined"!=typeof Worker?void 0===this.iWorker&&(this.iWorker=new Worker("/js/core/workers/counter.min.js?".concat(this.version)),this.iWorker.onmessage=function(i){i.data%t==0&&(n.debug&&q.log("".concat(e," refresh")),window.hearstRefreshAds(),"passive"!==e&&(n._stopWorker(),n._refreshPassive())),300===i.data&&n._stopWorker()}):console.warn("Sorry! No Web Worker support.")}},{key:"_stopWorker",value:function(){void 0!==this.iWorker&&(this.debug&&q.log("Refresh interval stopped"),this.counterS=!1,this.counterI=!1,this.counterP=!1,this.iWorker.terminate(),this.iWorker=void 0)}}]),t}();function Y(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var z=new r("REVENUE","#006400","#ffffff"),$=function(){function t(n,i,a,s){e(this,t),this.profile=a&&Object.hasOwnProperty.call(n,"sub")?n.sub:n.nonsub,this.data={columnA:[],columnB:[],columnC:[],columnX:[]},this.debug="revenue"===l("debug")||"all"===l("debug"),this.firstInteraction=!1,this.interval0=Object.hasOwnProperty.call(this.profile,"interactiveInterval")?parseFloat(this.profile.interactiveInterval.value):5,this.interval1=Object.hasOwnProperty.call(this.profile,"passiveInterval")?parseFloat(this.profile.passiveInterval.value):30,this.interval2=Object.hasOwnProperty.call(this.profile,"scrollInterval")?parseFloat(this.profile.scrollInterval.value):18,this.observerInit=!1,this.refresh=!!Object.hasOwnProperty.call(this.profile,"refresh")&&this.profile.refresh.value,this.refreshInit=!1,this.render=Object.hasOwnProperty.call(this.profile,"dump")&&this.profile.dump.value?"dump":"dynamic",this.sequence=Object.hasOwnProperty.call(this.profile,"sequence")?this.profile.sequence.value.split(","):[2,5],this.type=i,this.uid=s,this.version=window.Article?window.Article.version:window.Channel?window.Channel.version:"unknown"}return i(t,[{key:"init",value:function(t){var e,n=this;"undefined"!=typeof Worker?(void 0===e&&(n.debug&&z.log("Revenue build worker started..."),(e=new Worker("/js/core/workers/revenue.min.js?".concat(n.version))).postMessage([n.profile,n.type,window.innerWidth])),e.onmessage=function(i){!function(i){switch(Object.keys(i)[0]){case"revenueInit":e.terminate(),e=void 0,n.data.columnA.length>0&&(n.data.columnA=n.data.columnA.sort(n._comparator),n._columnA(n.data.columnA)),n.data.columnB.length>0&&(n.data.columnB=n.data.columnB.sort(n._comparator),n._columnB(n.data.columnB)),n.data.columnC.length>0&&(n.data.columnC=n.data.columnC.sort(n._comparator),n._columnC(n.data.columnC)),n.data.columnX.length>0&&(n.data.columnX=n.data.columnX.sort(n._comparator),n._columnX(n.data.columnX)),n._observer(),n.debug&&z.log("Revenue build worker completed"),n.revenueInit=i.revenueInit,t(i.revenueInit);break;case"columnA":n.data.columnA.push(i.columnA);break;case"columnB":n.data.columnB.push(i.columnB);break;case"columnC":n.data.columnC.push(i.columnC);break;case"columnX":n.data.columnX.push(i.columnX);break;default:console.warn("Sorry, could not interrupt the returned Event.")}}(i.data)}):(console.warn("Sorry, your browser does not support Web Workers."),t(n.revenueInit))}},{key:"_adhesivePosition",value:function(t,e){var n=this,i=e.reduce((function(t,e){return t+e}),0);if(2===i||56===i)t.classList.contains("hidden")||t.classList.add("hidden"),this.debug&&z.log("Leaderboard ad served. Collapsing adhesive position.");else{var a;t.classList.contains("hidden")&&t.classList.remove("hidden"),t.classList.contains("filled")||t.classList.add("filled"),this.debug&&z.log("Adhesive ad was attached"),176!==i?a=t.offsetHeight:(t.parentElement.style.height="292px",t.parentElement.classList.add("fixedHeight"),a=292);var s=document.querySelector("#headerZone")?document.querySelector("#headerZone"):document.querySelector(".pageHeader"),r=document.querySelector("#subNavigation"),o=".pageHeader.release { top: ".concat(-1*a,"px; transition: all 0.8s ease-in-out; }");document.querySelector("#headerZone")&&(o="#headerZone.release { top: ".concat(-1*(a+46),"px; transition: all 0.8s ease-in-out; }\n        #content { margin-top: ").concat(r.offsetHeight,"px; }")),this.debug&&z.log("Adhesive ad is ".concat(a,"px tall. Setting the masthead scroll to this position.")),this._addStyle(o,(function(){window.googletag.pubads().addEventListener("impressionViewable",(function(e){e.slot.getSlotElementId()===t.id&&(s.classList.contains("release")||(n.debug&&z.log(e.slot.getSlotElementId()+" impression viewable"),setTimeout((function(){s.classList.add("release"),n.debug&&z.log(e.slot.getSlotElementId()+" adhesive was released")}),1e3)))}))}))}}},{key:"_addStyle",value:function(t,e){var n=document.createElement("style");n.type="text/css",n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t)),document.head.appendChild(n),e()}},{key:"_columnA",value:function(t,e){var n,i=function(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return Y(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Y(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,a=function(){};return{s:a,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,r=!0,o=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return r=t.done,t},e:function(t){o=!0,s=t},f:function(){try{r||null==n.return||n.return()}finally{if(o)throw s}}}}(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;switch(a[0]){case"leaderboard":document.getElementsByClassName("pageHeader")[0].insertAdjacentHTML("beforebegin",a[2]),this.debug&&z.log("Placed ".concat(a[1]," into the leaderboard position"));break;case"adhesive":document.getElementsByClassName("pageHeader")[0].insertAdjacentHTML("afterbegin",a[2]),this.debug&&z.log("Placed ".concat(a[1]," into the adhesive position"));break;case"footerboard":document.getElementById("bottomZone").children[0].insertAdjacentHTML("afterend",a[2]),this.debug&&z.log("Placed ".concat(a[1]," into the footerboard position"));break;case"adhesion":window.matchMedia("(max-width: 767px)").matches&&(document.body.insertAdjacentHTML("beforeend",a[2]),this.debug&&z.log("Placed ".concat(a[1]," into the adhesion position")));break;default:this.debug&&z.warn("No placement determined for ".concat(a[0]," position"))}}}catch(t){i.e(t)}finally{i.f()}}},{key:"_comparator",value:function(t,e){return t[1]<e[1]?-1:t[1]>e[1]?1:0}},{key:"_observer",value:function(){var t=this;"undefined"!=typeof googletag&&(googletag=window.googletag||{},googletag.cmd=googletag.cmd||[],googletag.cmd.push((function(){googletag.apiReady&&googletag.pubads().addEventListener("slotRenderEnded",(function(e){var n=e.slot.getSlotElementId(),i=document.getElementById("headerZone");e.isEmpty?(document.getElementById(n).parentElement.classList.contains("hidden")||document.getElementById(n).parentElement.classList.add("hidden"),t.debug&&z.log("Ad with id: ".concat(n," returned as empty. Hiding the container."))):(document.getElementById(n).classList.add("loaded"),document.getElementById(n).parentElement.classList.contains("hidden")&&document.getElementById(n).parentElement.classList.remove("hidden"),t.refresh&&!t.refreshInit&&(t.refreshInit=!t.refreshInit,new V([t.interval0,t.interval1,t.interval2],t.debug,t.uid).init()),"Crown"===n&&i&&document.getElementById("Crown")&&(i.style.position="unset"),t.debug&&z.log("Ad with id: ".concat(n," and size: [").concat(e.size,"] returned.")),document.getElementById(n).parentElement.classList.contains("adhesive")&&t._adhesivePosition(document.getElementById(n),e.size))}))})))}},{key:"_onFirstInteraction",value:function(t){this.firstInteraction=!this.firstInteraction}}]),t}();var G=new r("REVENUE","#006400","#ffffff"),J=function(t){D(r,t);var n,a,s=(n=r,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=F(n);if(a){var i=F(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return U(this,t)});function r(t,n,i,a){var o;return e(this,r),(o=s.call(this,t,n,i,a)).paragraphs=Array.from(document.querySelectorAll(".article--content > p, .content-wrapper > p")),o.style=Object.hasOwnProperty.call(o.profile,"iterate")&&o.profile.iterate.value?"iterate":Object.hasOwnProperty.call(o.profile,"dump")&&o.profile.dump.value?"dump":"dynamic",o}return i(r,[{key:"_columnB",value:function(t){var e=this;if(!window.location.href.includes("slideshowComments")){if(window.innerWidth<928&&(t=t.filter((function(t){return"TMP300_3"!==t[0]})),window.location.href.includes("/articleComments/")&&0===this.paragraphs.length&&document.querySelector(".article-comments"))){var n=document.querySelector(".article-comments");return t=t.filter((function(t){return 0!==t[0].indexOf("CONCERT")})),void E(3)((function(i){if(t.length>0){var a=t.shift();n.lastElementChild.insertAdjacentHTML("afterend",a[2]),e.debug&&G.log("Placed ".concat(a[0]," at bottom of comments"))}}))}var i=this.sequence.length>1?parseFloat(this.sequence[1]):4,a=Math.floor((this.paragraphs.length-parseFloat(this.sequence[0])-1)/i+1),s=t.length<=a?t.length:a,r=[parseFloat(this.sequence[0]),parseFloat(this.sequence[1])],o=function(t,n,i,a){var s=e.paragraphs[n*i+t],r=e.paragraphs[n*i+1+t],o=e.paragraphs[n*i+2+t];return s&&"P"!==s.nodeName?(e.debug&&G.warn("Must be two paragraphs before index: ".concat(n*i+t," to place ").concat(a)),!1):r&&"P"!==r.nodeName?(e.debug&&G.warn("Must be one paragraph before index: ".concat(n*i+1+t," to place ").concat(a)),!1):o&&"P"!==o.nodeName?(e.debug&&G.warn("Must be one paragraph after index: ".concat(n*i+2+t," to place ").concat(a)),!1):(e.debug&&G.log("Placed ".concat(a," after index: ").concat(n*i+2+t)),!0)};E(s)((function(n){!function(t,n,i,a){for(var s=5;s;){if(o(t,n,i,a[0])){e.paragraphs[n*i+1+t].insertAdjacentHTML("afterend",a[2]);break}t+=1,s--}}(0,n,0===n?r[0]:r[1],t.shift()),s===n+1&&"dump"===e.render&&t.length>0&&e._placeRemainder(t)}))}}},{key:"_columnC",value:function(t){if(!window.location.href.includes("slideshowComments")){for(var e=document.querySelector(".article--aside"),n="dump"===this.style||t.length<=Math.floor(this.paragraphs.length/4)?t.length:Math.floor(this.paragraphs.length/4);n;){var i=t.shift();switch(i[0]){case"A300":e.insertAdjacentHTML("afterbegin",i[2]),this.debug&&G.log("Placed ".concat(i[0]," after the beginning of the right-rail"));break;default:e.insertAdjacentHTML("beforeend",i[2]),this.debug&&G.log("Placed ".concat(i[0]," before the end of the right-rail"))}n--}if("dump"===this.render&&t.length>0)for(var a=t.length;a;){var s=t.shift();document.querySelector(".article--content").insertAdjacentHTML("beforeend",s[2]),this.debug&&G.log("Dumped ".concat(s[0]," below the last paragraph")),a--}}}},{key:"_placeRemainder",value:function(t){for(var e=t.length;e;){var n=t.shift();document.querySelector(".article--content").insertAdjacentHTML("beforeend",n[2]),this.debug&&G.log("Dumped ".concat(n[0]," below the last paragraph")),e--}}}]),r}($);new r("REVENUE","#006400","#ffffff"),new r("REVENUE","#006400","#ffffff");var Z={init:function(){this.initEvents(),this.log=!1;for(var t=0,e=["qa","dev"];t<e.length;t++){var n=e[t];window.location.href.indexOf(n)>-1&&(this.log=!this.log)}window.location.href.indexOf("article")>-1&&this.loadSailthru()},initEvents:function(){var t=this;document.addEventListener("click",(function(e){for(var n,i=e.target;i&&i.getAttribute instanceof Function&&!(n=i.dataset.hdnAnalytics);)i=i.parentNode;n&&t.sendAnalyticsData(n)}))},sendAnalyticsData:function(t){var e=this,n=function(t){void 0!==window.console&&void 0!==window.console.log&&e.log&&console.log(t)},i=this.parseData(t);if(i)if(void 0!==window.s_HearstLinkTracking)try{s_HearstLinkTracking(i[1],i[2],i[3],i[4]),n("hdn_analytics: called s_HearstLinkTracking with data ".concat(t))}catch(e){n("hdn_analytics: error when calling s_HearstLinkTracking with data ".concat(t,", error: ").concat(e.message))}else n("hdn_analytics: s_HearstLinkTracking is not defined");else n("hdn_analytics: failed to match four elements from analytics DOM data ".concat(t))},parseData:function(t){var e=/^ *([^|]+)\|([^|]+)\|([^|]+)\|([^|]+) *$/.exec(t);return null!==e&&5===e.length&&e},loadSailthru:function(){var t={"SFChronicle.com":"fca2a0390286f0e53120a668534d9529","HoustonChronicle.com":"48e30b5083cf6bf47c519651453c9e8a","ExpressNews.com":"ec52c4681ed63b5beab139a2584f0d4","CTInsider.com":"9b21160afa226c9f84d27b47c3d52364"};u("//ak.sail-horizon.com/spm/spm.v1.min.js").then((function(){return!!(window.Sailthru&&window.Article.siteName&&t[window.Article.siteName])&&(Sailthru.init({customerId:t[Article.siteName],autoTrackPageViews:!1,useStoredTags:!0}),Sailthru.track("pageview",{url:HDN.dataLayer.href.canonicalUrl}),!0)})).catch((function(t){console.error(t)}))}};new r("MARQUEE","#9370DB","#ffffff"),"marquee"===l("debug")||l("debug");var Q={load:function(t){"spotim"===t.dataset.commentsType&&this.loadSpotim()},loadSpotim:function(){var t=window.HDN||{};t.spotimComplete||(t.spotimComplete=!0,u("/js/hdn/modules/spotimcomments.js").then((function(){var e=document.getElementById("spotim-comments");if(e&&e.dataset.spotimModule){var n="premium";return Object.hasOwnProperty.call(t.dataLayer.site,"commentsSiteType")&&(n=t.dataLayer.site.commentsSiteType),t.spotim.launch(n,!0),!0}throw new Error("SpotIm: Element doesn't exist")})).catch((function(t){console.error(t)})))}},K={init:function(){this.setBaseURL(),this.interactives=document.querySelectorAll("div.article-body param, #content param, div.article-body div, #content div"),this.interactives.length&&this.sortEmbeds()},setBaseURL:function(){window.location.hostname.includes("preview")&&(this.preview=!0),this.baseURL="//code.hearstnp.com"},sortEmbeds:function(){for(var t=this.interactives.length,e=0;e<t;e++){var n=this.interactives[e],i=n.name||n.getAttribute("data-type"),a=n.value||n.getAttribute("data-src");if(i&&a)switch(a=this.prependBaseURL(a),i){case"css":this.embedCSS(n,a);break;case"js":this.embedJS(n,a);break;case"iframe":this.embedIframe(n,a);break;case"html":this.embedHTML(n,a);break;case"img":this.embedImage(n,a);break;case"video":this.embedVideo(n,a)}}},embedCSS:function(t,e){d(e,!0),w(t)},embedJS:function(t,e){u(e),w(t)},embedHTML:function(t,e){var n=this.createSection("html"),i=t.getAttribute("data-class")||!1;this.showMobileFallback(t)?this.renderMobileFallback(t,n):(t.id&&(n.id=t.id),i&&n.classList.add(i),this.getHTML(e,(function(e){n.innerHTML=e,c(n,t),w(t)})))},embedIframe:function(t,e){var n,i=this.createSection("misc-iframe"),a=t.getAttribute("data-class")||!1,s=document.createElement("iframe");if(this.preview){var r=document.createElement("a");r.href=e,n="//".concat(r.hostname)}else n=this.baseURL;this.showMobileFallback(t)?this.renderMobileFallback(t,i):(t.id&&(s.id=t.id),a&&s.classList.add(a),s.setAttribute("data-url",e),i.appendChild(s),c(i,t),w(t),s.addEventListener("load",this.sendMessage.bind(this,n),{once:!0}),window.addEventListener("message",this.receiveMessage.bind(this,n,this.updateIframeStyles),!1))},embedImage:function(t,e){var n=this.createSection("photo"),i=t.getAttribute("data-class")||!1,a=document.createElement("img");if(this.showMobileFallback(t))this.renderMobileFallback(t,n);else{if(t.id&&(a.id=t.id),i&&a.classList.add(i),e instanceof Array){var s=e[0].split(" ")[0],r=decodeURI(e.join(", "));a.setAttribute("data-src",s),a.setAttribute("data-srcset",r)}else a.setAttribute("data-src",e);n.appendChild(a),c(n,t),w(t)}},embedVideo:function(t,e){var n=this.createSection("video"),i=t.getAttribute("data-class")||!1,a=document.createElement("video"),s="";if(this.showMobileFallback(t))this.renderMobileFallback(t,n);else{if(t.id&&(a.id=t.id),i&&a.classList.add(i),e instanceof Array){for(var r=0;r<e.length;r++){var o=e[r].split("."),l=o[o.length-1];l.includes("gif")||l.includes("png")||l.includes("jpg")?a.setAttribute("data-poster-src",e[r]):(l.includes("og")&&(l="ogg"),s+='<source data-src="'.concat(e[r],'" type="video/').concat(l,'" />'))}a.innerHTML=s}else a.setAttribute("data-src",e);a.loop="loop",a.autoplay="autoplay",n.appendChild(a),c(n,t),w(t)}},prependBaseURL:function(t){var e=this.baseURL,n=[],i=t.split(";").join(",").split(",").map((function(t){return t.trim()}));if(this.preview&&t.indexOf("//")>0&&(e=""),1===i.length)n.push(e+t),n=n.join("");else for(var a=0;a<i.length;a++)n.push(e+i[a]);return n},createSection:function(t){var e=document.createElement("section");return e.classList.add("media-interactive"),e.setAttribute("data-progressive","true"),e.setAttribute("data-component",t),e},showMobileFallback:function(t){var e=window.matchMedia&&window.matchMedia("(max-width: 600px)").matches,n=t.getAttribute("data-mobile-fallback")||!1;return e&&n},renderMobileFallback:function(t,e){var n=t.getAttribute("data-mobile-fallback")||!1;e.innerHTML='Embed not available on mobile, click <a href="'.concat(this.baseURL).concat(n,'">here</a> to view.'),c(e,t),w(t)},getHTML:function(t,e){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="text",n.onload=function(){200===n.status&&e(n.responseText)},n.onerror=function(){e('Cannot load embed, click <a href="'.concat(t,'">here</a> to view.'))},n.send()},sendMessage:function(t,e){var n=e.currentTarget,i=n.id;i&&n.contentWindow.postMessage("id=".concat(i),t)},receiveMessage:function(t,e,n){if(n.origin===t){for(var i={},a=n.data.split(";"),s=0;s<a.length;s++){var r=a[s].split("=");i[r[0]]=r[1]}e(i)}},updateIframeStyles:function(t){var e=document.getElementById(t.id);for(var n in t)"id"!==n&&(e[n]=t[n])}};function tt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function et(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],i=!0,a=!1,s=void 0;try{for(var r,o=t[Symbol.iterator]();!(i=(r=o.next()).done)&&(n.push(r.value),!e||n.length!==e);i=!0);}catch(t){a=!0,s=t}finally{try{i||null==o.return||o.return()}finally{if(a)throw s}}return n}}(t,e)||function(t,e){if(t){if("string"==typeof t)return tt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?tt(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var it=new r("RELATED","#ff8c00","#ffffff"),at=function(){function t(n,i,a){e(this,t),this.debug="related"===l("debug")||"all"===l("debug"),window.RecommendationsCallback=this._callback.bind(this);var s="https://recommendation.hearstnp.com/recommend?site_id=".concat(i,"&content_id=").concat(n,"&size=10&jsonp_callback=RecommendationsCallback"),r=document.createElement("script");r.src=s,document.getElementsByTagName("head")[0].appendChild(r),this.uid=a}return i(t,[{key:"_buildModule",value:function(t){var e,n,i=[],a=[],s=function(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return nt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?nt(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,a=function(){};return{s:a,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,r=!0,o=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return r=t.done,t},e:function(t){o=!0,s=t},f:function(){try{r||null==n.return||n.return()}finally{if(o)throw s}}}}(t.entries());try{for(s.s();!(e=s.n()).done;){var r=et(e.value,2),o=r[0],l=r[1],c="",d=Object.hasOwnProperty.call(l,"authors")?l.authors:"",u=Object.hasOwnProperty.call(l,"content_id")?l.content_id:"",h=Object.hasOwnProperty.call(l,"photo")?l.photo:"",f=Object.hasOwnProperty.call(l,"section")?("None"===(n=l.section)&&(n=""),n.indexOf("&")>-1&&(n=n.substr(0,n.indexOf("&")-1)),n=n.replace(":"," // ")):"",m=Object.hasOwnProperty.call(l,"title")?function(t,e){if("None"===t)return"";if(t.length>65){var n=t.substr(0,65);return n.substr(0,Math.min(n.length,n.lastIndexOf(" ")))+"..."}return t}(l.title):"",g=Object.hasOwnProperty.call(l,"url")?location.protocol+"//".concat(l.url,"?source=nlp"):"",p="related_stories_nlp|article-".concat(u,"|article-").concat(this.articleId,"|").concat(o+1),v=1===o?"NTVRELATED":"";""!==l.photo?(c=['<li id="'.concat(v,'" class="relatedStories--item" data-number="').concat(o+1,'">'),'<div class="slide" data-number="'.concat(o+1,'">'),'<a href="'.concat(g,'" class="hdn-analytics" data-hdn-analytics="').concat(p,'">'),'<div class="slide--image fullBleed">','<picture class="deferred threeTwo" data-progressive="true" data-component="picture">','<source data-srcset="'.concat(location.protocol,"//").concat(h.replace("/rawImage.","/ratio3x2_350.")," 1x, ").concat(location.protocol,"//").concat(h.replace("/rawImage.","/ratio3x2_700."),' 2x">'),'<img data-srcset="'.concat(location.protocol,"//").concat(h.replace("/rawImage.","/ratio3x2_700."),'">'),"</picture>","</div>",'<div class="slide--headline">','<div class="slide--headline-section">'.concat(f,"</div>"),'<div class="slide--headline-title">'.concat(m,"</div>"),'<div class="slide--byline">'.concat(d,"</div>"),"</div></a></div></li>"].join("\n"),i.push(c)):(c=['<li id="'.concat(v,'" class="relatedStories--item noImage" data-number="').concat(o+1,'">'),'<div class="slide noImage" data-number="'.concat(o+1,'">'),'<a href="'.concat(g,'" class="hdn-analytics" data-hdn-analytics="').concat(p,'">'),'<div class="slide--headline">','<div class="slide--headline-section">'.concat(f,"</div>"),'<div class="slide--headline-title">'.concat(m,"</div>"),'<div class="slide--byline">'.concat(d,"</div>"),"</div></a></div></li>"].join("\n"),a.push(c))}}catch(t){s.e(t)}finally{s.f()}var y=i.concat(a).join(""),b=['<section class="relatedStories" data-progressive="true" data-component="carousel">','<div class="relatedStories--title articleModule">','<div class="articleModule--title h4">More for you</div>','<div class="relatedStories--nav">','<button class="relatedStories--nav-btn relatedStories--nav-prev btn" disabled data-delta="-1"></button>','<button class="relatedStories--nav-btn relatedStories--nav-next btn" data-delta="1"></button>',"</div>","</div>",'<ul class="relatedStories--list" data-total="'.concat(t.length,'"><div class="scrollSpacer"></div>').concat(y,"</ul>"),"</section>"].join("");this._findInsertion(b)}},{key:"_callback",value:function(t){delete window.RecommendationsCallback,t.head.success&&t.data.recommendations.length>0?(this.debug&&it.log("This article returned ".concat(t.data.recommendations.length," NLP results!")),this._buildModule(t.data.recommendations)):this.debug&&it.error("NLP Recirc: Problem with data")}},{key:"_findInsertion",value:function(t){var e=Array.from(document.querySelectorAll(".article--content > p, .content-wrapper > p"));if(e.length>0){var n=Math.floor(e.length/3*2);n+3>=e.length?this.debug&&it.warn("This article is too short to support NLP results!"):(this._insertModule(e[n],t),this.debug&&it.log("NLP results were inserted before the ".concat(n," paragraph!")))}}},{key:"_insertModule",value:function(t,e){var n=document.createElement("section");n.className="asset_relatedlinks related-links",n.id="moduleNLP",n.innerHTML=e,t.parentNode.insertBefore(n,t.nextSibling),window.innerWidth>=768&&new s(n,{speed:500,scrollingOneByOne:!0,touch:!1,click:!0,dynamic:!1,effect:"ease"},this.uid).init()}}]),t}();function st(){HDN&&(window.location.href.indexOf("fromRichie=1")>-1&&(HDN.dataLayer.paywall.mode="edbDisabled",document.documentElement.classList.add("from-richie")),navigator.userAgent.indexOf("Richie/")>-1&&(HDN.dataLayer.paywall.mode="edbDisabled",document.documentElement.classList.add("richie-webview")))}function rt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var ot={networks:{twitter:{label:"Twitter",url:"https://twitter.com/intent/tweet?url={{URL}}&text={{TITLE}}&via={{TWHANDLE}}",source:"t.co",medium:"referral"},facebook:{label:"Facebook",url:"https://www.facebook.com/dialog/feed?app_id={{FBAPPID}}&link={{URL}}&name={{TITLE}}&description={{SUMMARY}}&picture={{IMAGE}}&redirect_uri={{URL}}",source:"facebook.com",medium:"referral"},email:{label:"Email",url:"mailto:?subject=Your%20friend%20has%20shared%20a%20{{PUBLISHER}}%20link%20with%20you%3A%20&body={{TITLE}}%0A%0A{{URL}}%0A%0A{{SUMMARY}}%0A%0AThis%20message%20was%20sent%20via%20{{SITE}}",source:"share-by-email",medium:"email"}},init:function(t,e,n){var i=Array.from(document.querySelectorAll(".share-list a"));if(0!==i.length&&window.Article){var a="".concat(window.location.href.split("?")[0],"?utm_campaign=CMS%20Sharing%20Tools%20(Premium)&utm_source=UTMSOURCE&utm_medium=UTMMEDIUM"),s=document.createElement("textarea");s.innerHTML=window.Article.title||window.omni_title;var r={TITLE:encodeURIComponent(s.value),URL:encodeURIComponent(a),IMAGE:encodeURIComponent(window.Article.image),PUBLISHER:document.querySelector('meta[itemprop="publisher"]')?encodeURIComponent(document.querySelector('meta[itemprop="publisher"]').content):encodeURIComponent(window.Article.siteName),SUMMARY:encodeURIComponent(window.Article.summary),SITE:encodeURIComponent(window.Article.siteName),FBAPPID:this._getFBAppId(),TWHANDLE:this._getTWHanddle(),SLUG:encodeURIComponent(window.Article.slug)};if(HDN&&"spotim"===HDN.dataLayer.site.commentsType){var o=HDN.dataLayer.site.commentSiteKey;this._getCommentCounts(o,"".concat(t,"-").concat(e,"-").concat(n))}this._setShareLinks(i,r)}},_getFBAppId:function(){var t="",e=document.querySelector("meta[property='fb:app_id']")||!1;return e&&(t=e.getAttribute("content")),t},_getTWHanddle:function(){var t="",e=document.querySelector("meta[name='twitter:site']");return e&&"@"===(t=e.getAttribute("content")).charAt(0)&&(t=t.substring(1)),t},_setShareLinks:function(t,e){for(var n=this,i=function(){var i=s[a],r=t.filter((function(t){return t.dataset.sharenetwork===i})),o=n.networks[i].url,l=n.networks[i].source,c=n.networks[i].medium,d="comments"===i?"_self":"_blank";for(var u in e){var h=new RegExp("{{".concat(u,"}}"),"g");o=o.replace(h,e[u]).replace("social-mobile","".concat(i,"-mobile")).replace("social-premium","".concat(i,"-premium"))}o=o.replace("UTMSOURCE",l).replace("UTMMEDIUM",c);for(var f=r.length,m="".concat(i,"_share|article-").concat(window.Article.id,"|article-page-top|"),g=0;g<f;g++){var p=document.createElement("a");p.href=o,p.target=d,p.rel="noreferrer noopener",p.className="hdn-analytics ".concat(r[g].className),p.dataset.hdnAnalytics="".concat(m).concat(g+1),r[g].parentElement.replaceChild(p,r[g]),p.setAttribute("aria-label",i)}},a=0,s=["facebook","twitter","email"];a<s.length;a++)i()},_getCommentCounts:function(t,e){"fetch"in window?fetch("https://open-api.spot.im/v1/messages-count?spot_id=".concat(t,"&posts_ids=").concat(e)).then((function(t){var e=t.headers.get("content-type");if(!e||!e.includes("application/json"))throw new TypeError("Sorry, responses must be in JSON!");return t.json()})).then((function(t){var n=Object.hasOwnProperty.call(t,"messages_count")?t.messages_count[e]:0;if(n>0){var i,a=function(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return rt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?rt(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,a=function(){};return{s:a,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,r=!0,o=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return r=t.done,t},e:function(t){o=!0,s=t},f:function(){try{r||null==n.return||n.return()}finally{if(o)throw s}}}}(document.getElementsByClassName("share-count"));try{for(a.s();!(i=a.n()).done;)i.value.innerHTML=n}catch(t){a.e(t)}finally{a.f()}}})).catch((function(t){return console.error(t)})):console.warn("Fetch API not found, cannot return comment counts")}};function lt(t){var e=t.getElementsByClassName("factBox--text")[0],n=t.getElementsByTagName("button")[0],i=n.getAttribute("data-hdn-analytics");function a(){e.style.height="134px",e.classList.add("masked"),e.parentElement.dataset.display="closed",n.setAttribute("aria-expanded",!1)}e.parentElement.style.setProperty("--factBoxHeight",e.offsetHeight+"px"),a(),n.addEventListener("click",(function(t){"open"===e.parentElement.dataset.display?a():(e.removeAttribute("style"),e.classList.remove("masked"),e.parentElement.dataset.display="open",n.setAttribute("aria-expanded",!0)),n.getElementsByClassName("more")[0].classList.toggle("hidden"),n.getElementsByClassName("less")[0].classList.toggle("hidden"),setTimeout((function(){n.setAttribute("data-hdn-analytics",i.indexOf("expand")>-1?i.replace("expand","collapse"):i.replace("collapse","expand"))}),250)}))}function ct(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return dt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dt(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,a=function(){};return{s:a,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,r=!0,o=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return r=t.done,t},e:function(t){o=!0,s=t},f:function(){try{r||null==n.return||n.return()}finally{if(o)throw s}}}}function dt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var ut=function(t){D(r,t);var n,a,s=(n=r,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=F(n);if(a){var i=F(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return U(this,t)});function r(){return e(this,r),s.apply(this,arguments)}return i(r,[{key:"init",value:function(){document.getElementById("progress")&&this._progressBar(),document.getElementById("pageTitle")&&document.body.dataset.parent&&this._pageTitle(document.getElementById("pageTitle"),document.body.dataset.parent);var t=nextStory||[];document.getElementById("nextStory")&&t.length>0?(this._nextStory(document.getElementById("nextStory"),t),document.getElementById("nextStory").classList.remove("hidden")):document.getElementById("titleBar").classList.remove("hidden"),["ctpost","dariennewsonline","greenwichtime","middletownpress","newcanaannewsonline","newstimes","nhregister","premiumchron","premiumctpost","premiummysa","premiumsfgate","registercitizen","sheltonherald","stamfordadvocate","thehour","theridgefieldpress","timesunion","trumbulltimes","wiltonbulletin"].includes(this.site)||this.element.setAttribute("data-free","true")}},{key:"_nextStory",value:function(t,e){var n,i,a;try{n=parseInt(window.HDN.dataLayer.content.objectId,10)}catch(t){n=null}if(this._storageAvailable("localStorage")&&null!==n){var s=e.map((function(t){return t.id})).indexOf(n),r=this._populateStorage(n);for(var o in s>-1&&e.splice(s,1),r)if(Object.hasOwnProperty.call(r,o)){var l=e.map((function(t){return t.id})).indexOf(r[o]);l>-1&&e.splice(l,1)}e.length>0?(i=e[0],a='<a class="pageHeader--nextStory-link" href=\''.concat(i.url,"'' data-hdn-analytics='visit-next-story|article-").concat(i.id,"|article-").concat(n,"|0'>"),i.image.length>0&&(a+="<img class='pageHeader--nextStory-img' src='".concat(i.image,"'>")),a+='<span class="pageHeader--nextStory-headline hdn-analytics"><span>Next Up:</span>'.concat(i.headline,"</span></a>"),t.insertAdjacentHTML("afterbegin",a)):document.getElementsByClassName("pageHeader")[0].classList.add("noNext")}}},{key:"_populateStorage",value:function(t){var e,n,i=localStorage.getItem("readArticles")?JSON.parse(localStorage.getItem("readArticles")):{};return e=i,n=t,Object.keys(e).find((function(t){return e[t]===n}))||(i["a_".concat(Object.keys(i).length)]=t,localStorage.setItem("readArticles",JSON.stringify(i))),i}},{key:"_progressBar",value:function(){var t=document.getElementsByTagName("main")[0];window.addEventListener("scroll",(function(){var e=t.clientHeight+t.offsetTop-window.innerHeight,n=(document.body.scrollTop||document.documentElement.scrollTop)/e*100;n<=100&&(document.getElementById("progress").style.width="".concat(n,"%"))}),!0)}},{key:"_storageAvailable",value:function(t){try{var e=window[t],n="__storage_test__";return e.setItem(n,n),e.removeItem(n),!0}catch(t){return t instanceof DOMException&&(22===t.code||1014===t.code||"QuotaExceededError"===t.name||"NS_ERROR_DOM_QUOTA_REACHED"===t.name)&&0!==storage.length}}}]),r}(function(){function t(n,i,a,s){var r=this;e(this,t),this.activeSession=a,this.current=i,this.element=n,this.mastheadItems={container:document.getElementById("navigation"),links:document.getElementsByClassName("pageHeader--links")[0],logo:document.getElementsByClassName("pageHeader--logo")[0],masthead:document.getElementsByClassName("pageHeader")[0],next:document.getElementsByClassName("pageHeader--nextStory")[0],progressBar:document.getElementsByClassName("pageHeader--progress")[0],search:document.getElementsByClassName("pageHeader--search")[0],titleBar:document.getElementsByClassName("pageHeader--titleBar")[0],trigger:document.getElementById("navToggle"),wrapper:document.getElementsByClassName("navigation--wrapper")[0]},this.menuOpen=!1,this.site=s,this.version=window.Article?window.Article.version:window.Channel.version,this.visiableStates={stage:0,links:{display:"block",visibility:!0},logo:{display:"block",visibility:!0},next:{display:"block",visibility:!0},search:{display:"block",visibility:!0},titleBar:{display:"block",visibility:!0}},this._search(document.getElementById("search")),this._subscriptionButton(document.querySelector("#subscription button")),this._updateHeaderLinks(a),new MutationObserver((function(t){var e,n=ct(t);try{for(n.s();!(e=n.n()).done;)"attributes"===e.value.type&&r._updateHeaderLinks(treg.identity.isEntitled)}catch(t){n.e(t)}finally{n.f()}})).observe(n.querySelector(".treg-not-logged-in"),{attributes:!0,childList:!0,subtree:!0}),function(){if(document.getElementById("navigation")){var t=Array.from(document.querySelectorAll("#navigation .parent, #navigation .single"));r._buildMenu(t,(function(){document.getElementById("navToggle").classList.add("show");var t=function(t){"click"!==t.type&&13!==t.keyCode||r._toggleMenu(t.target.classList.contains("open"))};document.getElementById("navToggle").addEventListener("click",t,!1),document.getElementById("navToggle").addEventListener("keydown",t,!1),window.innerWidth>=1048&&document.getElementById("navToggle__page").addEventListener("click",(function(){document.getElementById("navToggle").click()}))}))}}()}return i(t,[{key:"_buildMenu",value:function(t,e){var n,i,a=this,s=[],r=ct(t);try{for(r.s();!(i=r.n()).done;){var o=i.value;s.push({count:parseFloat(o.dataset.length),index:parseFloat(o.dataset.index)})}}catch(t){r.e(t)}finally{r.f()}var l=function(){var t=document.getElementsByClassName("navigation--menu")[0].offsetHeight,n=document.getElementsByClassName("pageHeader")[0].offsetHeight,i=window.innerHeight;i-n<t&&window.innerWidth>1024&&(document.getElementsByClassName("navigation--menu")[0].style.height="".concat(i-n,"px"),document.getElementsByClassName("navigation--menu")[0].classList.add("scroll")),a._buildSubNavigation(e)};"undefined"!=typeof Worker?(void 0===n&&(n=new Worker("/js/core/workers/navigation.min.js?".concat(a.version))).postMessage(s),n.onmessage=function(t){!function(t){switch(Object.keys(t)[0]){case"terminate":n.terminate(),n=void 0,l();break;default:!function(t,e){var n=["hidden-xs hidden-lg hidden-xl","hidden-xs hidden-sm hidden-md hidden-xl","hidden-xs hidden-sm hidden-md hidden-lg"];for(var i in t){var a=document.createElement("ul");a.className=n[e];var s,r=ct(t[i]);try{for(r.s();!(s=r.n()).done;){var o=s.value;a.appendChild(document.querySelector('#navigation [data-index="'.concat(o,'"]')).cloneNode(!0))}}catch(t){r.e(t)}finally{r.f()}document.getElementsByClassName("navigation--menu")[0].appendChild(a)}}(t.group,t.index)}}(t.data)}):(console.warn("Sorry, your browser does not support Web Workers."),l())}},{key:"_buttonPress",value:function(t,e,n){t.classList.toggle(e),setTimeout((function(){t.classList.toggle(e)}),n)}},{key:"_buildSubNavigation",value:function(t){var e=this;Array.from(this.element.getElementsByClassName("navigation--menu")[0].children[0].getElementsByClassName("toggle")).forEach((function(t){t.addEventListener("click",(function(){e._toggleSection(t,t.nextElementSibling)}))})),t()}},{key:"_isHidden",value:function(t){return null===t.offsetParent}},{key:"_navigationReady",value:function(t){var e=this;document.getElementById("navToggle").classList.add("show"),document.getElementById("navToggle").addEventListener("click",(function(t){e._toggleMenu(t.target.classList.contains("open"))})),window.innerWidth>=1048&&document.getElementById("navToggle__page").addEventListener("click",(function(){document.getElementById("navToggle").click()})),t()}},{key:"_pageTitle",value:function(t,e){t.getElementsByClassName("pageTitle--parent")[0]&&t.getElementsByClassName("pageTitle--parent")[0].addEventListener("click",(function(t){t.preventDefault(),window.location.assign("/".concat(e))}))}},{key:"_search",value:function(t){var e=this;if(t){var n=function(t){"click"!==t.type&&13!==t.keyCode||e._toggleSearch(t.target.classList.contains("open"))};document.getElementsByClassName("searchToggle")[0].addEventListener("click",n,!1),document.getElementsByClassName("searchToggle")[0].addEventListener("keydown",n,!1)}}},{key:"_subscriptionButton",value:function(t){var e=this;t&&t.addEventListener("click",(function(n){e._buttonPress(t,"_buttonPress",1e3),window.open(n.target.dataset.link,"_blank");try{Z.sendAnalyticsData("visit|subscribe-link|ard-header|0")}catch(t){console.error(t.message)}}))}},{key:"_toggleHeader",value:function(t){var e,n;window.innerWidth<768?(e=["pageHeader--menuButton","pageHeader--search"],n=["pageHeader--logo","pageHeader--titleBar","pageHeader--nextStory","pageHeader--links"]):(e=["pageHeader--menuButton","pageHeader--logo"],n=["pageHeader--titleBar","pageHeader--nextStory","pageHeader--links","pageHeader--search"]);var i,a=ct(e);try{for(a.s();!(i=a.n()).done;){var s=i.value,r=document.querySelector(".pageHeader .".concat(s));t?r.classList.add("menuOpen--show"):r.classList.remove("menuOpen--show")}}catch(t){a.e(t)}finally{a.f()}var o,l=ct(n);try{for(l.s();!(o=l.n()).done;){var c=o.value,d=document.querySelector(".pageHeader .".concat(c));t?d.classList.add("menuOpen--hide"):d.classList.remove("menuOpen--hide")}}catch(t){l.e(t)}finally{l.f()}}},{key:"_toggleMenu",value:function(t){var e=document.getElementsByClassName("pageHeader--wrapper")[0].getBoundingClientRect();if(this.menuOpen=!this._menuOpen,this._buttonPress(this.mastheadItems.trigger,"_buttonPress",1e3),t){document.getElementsByClassName("pageHeader")[0].style="",W(!1),this._toggleHeader(!1),this.mastheadItems.trigger.classList.remove("open"),this.mastheadItems.trigger.setAttribute("aria-expanded","false"),this.mastheadItems.container.classList.remove("open"),this.mastheadItems.progressBar.classList.remove("fade");try{Z.sendAnalyticsData("close|hamburger-menu|navigation-ard|0")}catch(t){console.error(t.message)}window.innerWidth<768&&this._toggleSearch(!0)}else{document.getElementsByClassName("pageHeader")[0].style.transform="translateY(-".concat(e.top,"px)"),this._toggleHeader(!0),this.mastheadItems.trigger.classList.add("open"),this.mastheadItems.trigger.setAttribute("aria-expanded","true"),this.mastheadItems.container.classList.add("open"),this.mastheadItems.progressBar.classList.add("fade"),W(!0);try{Z.sendAnalyticsData("open|hamburger-menu|navigation-ard|0")}catch(t){console.error(t.message)}window.innerWidth<768&&this._toggleSearch(!1)}}},{key:"_toggleSearch",value:function(t){var e=this,n=document.getElementById("search"),i=document.getElementsByClassName("searchToggle")[0],a=document.getElementsByClassName("pageHeader--search")[0];this._buttonPress(i,"_buttonPress",1e3);var s=function t(){e._toggleSearch(!0),window.removeEventListener("scroll",t,!1)};t?(window.removeEventListener("scroll",s,!1),i.classList.remove("open"),i.setAttribute("aria-expanded","false"),a.classList.remove("show"),n.blur(),setTimeout((function(){i.classList.remove("open"),a.classList.remove("open")}),200)):(window.innerWidth>=768&&window.addEventListener("scroll",s,!1),i.classList.add("open"),i.setAttribute("aria-expanded","true"),a.classList.add("open"),setTimeout((function(){a.classList.add("show")}),200)),n.addEventListener("keydown",(function(t){"Enter"===t.key&&document.forms.query.submit()}))}},{key:"_toggleSection",value:function(t,e){if(t.classList.contains("open"))t.classList.remove("open"),e.classList.remove("open"),document.getElementsByClassName("navigation--menu")[0].classList.remove("subOpen");else{var n=function(){t.classList.add("open"),e.classList.add("open"),document.getElementsByClassName("navigation--menu")[0].classList.add("subOpen")};if(document.getElementsByClassName("navigation--menu")[0].classList.contains("subOpen")){var i=this.element.querySelectorAll(".toggle.open")[0];i.classList.remove("open"),i.nextElementSibling.classList.remove("open"),document.getElementsByClassName("navigation--menu")[0].classList.remove("subOpen"),setTimeout((function(){n()}),500)}else n()}}},{key:"_updateHeaderLinks",value:function(t){this.element.setAttribute("data-subscriber",t);var e=Array.from(document.getElementsByClassName("pageHeader--links-sub")),n=Array.from(document.getElementsByClassName("pageHeader--links-nonsub")),i=function(t){var e,n=ct(t);try{var i=function(){var t=e.value;t.classList.remove("show"),setTimeout((function(){t.classList.add("hidden")}),500)};for(n.s();!(e=n.n()).done;)i()}catch(t){n.e(t)}finally{n.f()}},a=function(t){var e,n=ct(t);try{var i=function(){var t=e.value;t.classList.remove("hidden"),setTimeout((function(){t.classList.add("show")}),500)};for(n.s();!(e=n.n()).done;)i()}catch(t){n.e(t)}finally{n.f()}};t?(i(n),a(e)):(a(n),i(e))}},{key:"_updateVisibleStates",value:function(t){for(var e in t)this.visiableStates[e].display=getComputedStyle(t[e],null).display,this.visiableStates[e].visibility=!this._isHidden(t[e])}}]),t}());function ht(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=F(t);if(e){var a=F(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return U(this,n)}}function ft(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return mt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?mt(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,a=function(){};return{s:a,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,r=!0,o=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return r=t.done,t},e:function(t){o=!0,s=t},f:function(){try{r||null==n.return||n.return()}finally{if(o)throw s}}}}function mt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}new r("GALLERY","#deb887","#ffffff");var gt=function(t){D(a,t);var n=ht(a);function a(t,i){var s,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"default",o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return e(this,a),(s=n.call(this,t,i,r,o)).container=t.getElementsByClassName("gallery--slider")[0],s.countBox=t.getElementsByClassName("gallery--count")[0].children[0],s.countContainer=t.getElementsByClassName("gallery--count")[0],s.dots=t.getElementsByClassName("gallery--indicators")[0].children,s.indicators=t.getElementsByClassName("gallery--indicators")[0],s.items=Array.from(t.getElementsByTagName("figure")),s.shareButtons=Array.from(t.getElementsByClassName("shareButton")),s.analytics={},s.currentIndex=0,s.countLeft=[0],s.countRight=[],s.delta=0,s.isTouchMove=!1,s.galleryInit=!1,s.refreshInit=!1,s.slideId=0,s}return i(a,[{key:"init",value:function(){this._setAnalytics(),this._setEventListeners(),"object"!==h(window.HDN_ResponsiveGallery)&&(window.HDN_ResponsiveGallery={galleries:[],fullscreen:void 0}),this.container.style.setProperty("--nB",Math.floor(this.items[0].children[0].offsetHeight/2)-25+"px"),this.container.style.setProperty("--nBF",Math.floor(window.innerHeight/2)-25+"px"),this.countContainer.style.setProperty("--eB",this.container.offsetHeight-this.items[0].children[0].offsetHeight+22+"px"),this.galleryInit||this._initialSlide()}},{key:"_displayManager",value:function(t){var e=[];t-2>-1&&e.push(t-2),t-1>-1&&e.push(t-1),e.push(t),t+1<this.items.length&&e.push(t+1),t+2<this.items.length&&e.push(t+2);var n,i=ft(this.items.entries());try{for(i.s();!(n=i.n()).done;){var a=et(n.value,2),s=a[0],r=a[1];s===t?r.style.visibility="visible":s!==t&&"hidden"!==r.style.visibility&&(r.style.visibility="hidden"),0!==s&&(e.indexOf(s)>-1?r.classList.remove("hidden"):r.classList.add("hidden"))}}catch(t){i.e(t)}finally{i.f()}}},{key:"_getPrevNextIndexes",value:function(){var t,e;return 0===this.currentIndex?(t=this.items.length-1,e=1):this.currentIndex===this.items.length-1?(t=this.currentIndex-1,e=0):(t=this.currentIndex-1,e=this.currentIndex+1),[t,e]}},{key:"_handleClick",value:function(t){var e,n,i,a,s=this;if(("IMG"===t.srcElement.nodeName||"PICTURE"===t.srcElement.nodeName||t.srcElement.classList.contains("gallery--slider")||t.srcElement.classList.contains("nav")&&(t.srcElement.classList.contains("prev")||t.srcElement.classList.contains("next")))&&(t.stopPropagation(),!this.isTouchMove)){var r=function(t){switch(t){case 0:s.currentIndex-1>-1&&s._navigate(s.currentIndex-1,-1,!0,"curve");break;case 1:s.currentIndex+1!==s.items.length&&s._navigate(s.currentIndex+1,1,!0,"curve")}},o=function(t,e,n){return t>e&&t<n};t.srcElement.classList.contains("nav")?t.srcElement.classList.contains("prev")?r(0):r(1):r((e=this.items[this.currentIndex].children[0].getBoundingClientRect(),n=t.offsetX,i=t.offsetY,o(n,0,a=Math.ceil(.2*e.width))&&o(i,70,e.height-70)?0:o(n,4*a,5*a)&&o(i,70,e.height-70)?1:null))}}},{key:"_indicatorDisplay",value:function(t,e){this._indicatorMap(t,e);for(var n=0;n<this.dots.length;n++)this.indicators.dataset.current=t,t===n?(this.dots[n].dataset.current=1,this.dots[n].setAttribute("aria-current","true")):(this.dots[n].dataset.current="",this.dots[n].removeAttribute("aria-current")),this.items.length>5&&(e>0?3===this.countLeft.length&&(this.countLeft.indexOf(n)>-1?this.dots[n].className="large":(this.dots[n].className="",this.countLeft[0]-2>-1&&(this.dots[this.countLeft[0]-2].className="small"),this.countLeft[0]-1>-1&&(this.dots[this.countLeft[0]-1].className="medium"),this.countLeft[2]+1<this.dots.length&&(this.dots[this.countLeft[2]+1].className="medium"),this.countLeft[2]+2<this.dots.length&&t<3&&(this.dots[this.countLeft[2]+2].className="small"))):3===this.countRight.length&&(this.countRight.indexOf(n)>-1?this.dots[n].className="large":(this.dots[n].className="",this.countRight[0]-2>-1&&t>this.dots.length-4&&(this.dots[this.countRight[0]-2].className="small"),this.countRight[0]-1>-1&&(this.dots[this.countRight[0]-1].className="medium"),this.countRight[2]+1<this.dots.length&&(this.dots[this.countRight[2]+1].className="medium"),this.countRight[2]+2<this.dots.length&&(this.dots[this.countRight[2]+2].className="small"))))}},{key:"_indicatorMap",value:function(t,e){if(this.items.length>5)if(this.countLeft.length>=1&&this.countLeft.length<=2&&this.countLeft.length+e!==0?e>0?this.countLeft.push(t):this.countLeft.pop():e>0&&t!==this.dots.length?(this.countLeft.shift(),this.countLeft.push(t)):3===this.countLeft.length&&1!==t?(this.countLeft.pop(),this.countLeft.unshift(t-2)):this.countLeft.pop(),e<0){0===this.countRight.length&&this.countRight.push(t+1);for(var n=this.countRight.length+1<4?this.countRight.length+1:3,i=0;i<n;i++)this.countRight[i]=t+i}else this.countRight.length>0&&this.countRight.pop()}},{key:"_initCaption",value:function(t){var e=t.getElementsByTagName("figcaption")[0];e.clientHeight<e.scrollHeight&&e.classList.add("collapsed")}},{key:"_setCaptionsWatcher",value:function(t){var e,n=this,i=ft(t);try{for(i.s();!(e=i.n()).done;){var a=e.value,s=this.items[a];this._initCaption(s),s.classList.contains("caption-watched")||function(){s.classList.add("caption-watched");var t=s.getElementsByTagName("figcaption")[0],e=n.items[0].getElementsByTagName("figcaption")[0],i=t.querySelector(".show-more a"),a=t.querySelector(".show-less a");if(null===i||null===a)return"continue";i.addEventListener("click",(function(n){return t.classList.add("expanded"),t.classList.remove("collapsed"),e.style.height=t.clientHeight+"px",!1}),!1),a.addEventListener("click",(function(n){return t.classList.add("collapsed"),t.classList.remove("expanded"),e.style.height=t.clientHeight+"px",!1}),!1);var r=new IntersectionObserver((function(t,e){t.forEach((function(t){if(t.intersectionRatio<1){var e=t.target.parentNode;if(!e.parentNode.classList.contains("hidden"))if(e.classList.contains("collapsed")||e.classList.contains("expanded")){var n=e.getElementsByClassName("caption")[0];n.clientHeight>=n.scrollHeight&&e.classList.remove("collapsed","expanded")}else e.classList.add("collapsed")}}))}),{root:t,rootMargin:"0px",threshold:[0,1]}),o=t.getElementsByClassName("credits")[0];r.observe(o)}()}}catch(t){i.e(t)}finally{i.f()}}},{key:"_initialSlide",value:function(){var t=window.location.hash,e=0;if(t.length>0){var n=t.split("-")[1],i=this.gallery.querySelector('.gallery--slider-item[data-slide-id="'+n+'"]')||null,a=i?parseInt(i.dataset.slideNumber,10)-1:0;this.items[a]&&a!==this.items-2&&(e=a)}this._displayManager(e),this.currentIndex=e;var s=this._getPrevNextIndexes(),r=s[0],o=s[1];if(this._setCaptionsWatcher([r,e,o]),this._loadImages([r,e,o]),0!==e)for(var l=1;l<e+1;l++)this._navigate(l,1,!1,"default");var c=parseInt(this.gallery.querySelector(".gallery--slider-item picture").clientHeight/2,10);Array.apply(null,this.gallery.querySelectorAll(".gallery--slider .nav")).forEach((function(t){t.style.top=c-21+"px"})),this.gallery.classList.add("lightsOn"),this.galleryInit=!0}},{key:"_navigate",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.delta,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"default";if(!(t<0||t>this.items.length-1)){window.dispatchEvent(new CustomEvent(this.uid,{bubbles:!0,detail:{refresh:"interactive"}}));var s="photo",r="".concat(t+1,":").concat(this.items.length),o="wcm",l=this.gallery.dataset.metaId,c=this.gallery.dataset.metaTitle;if("function"==typeof HDN.refresh)try{HDN.refresh(s,r,o,l,c)}catch(t){console.error(t)}var d=["0.2s","0.25s","0.3s"],u=window.innerWidth<768?d[0]:window.innerWidth<1024?d[1]:d[2],h=["0.21, 1.81, 0.33, 0.73","0.4, 0.2, 0.6, 0.9","0.785, 0.135, 0.15, 0.86"],f="elastic"===a?h[0]:"curve"===a?h[1]:h[2];this.countBox.classList.contains("hidden")||this.countBox.classList.add("hidden");var m=this.items[t].getAttribute("data-slide-id");this.slideId=parseFloat(this.items[t].getAttribute("data-slide-id"))||null,null==this.slideId||m.includes("taboola")||(m="photo-"+this.slideId),history.replaceState?history.replaceState(null,null,"#"+m):location.hash="#"+m;var g=t-1<0?this.items.length-1:t-1,p=t+1===this.items.length?0:t+1;this._setCaptionsWatcher([g,p]),0!==t?this.items[0].getElementsByTagName("figcaption")[0].style.height=this.items[t].getElementsByTagName("figcaption")[0].clientHeight+"px":this.items[0].getElementsByTagName("figcaption")[0].style.removeProperty("height"),this._loadImages([g,p]);var v=function(i,a,s,r,o){e.items[t+i].style.transform="translateX(".concat(a,"%)"),e.items[t+i].style.transition="all ".concat(u," cubic-bezier(").concat(f,")"),e.items[t+i].children[0].style.opacity=s,e.items[t+i].children[0].style.transition="all ".concat(u," cubic-bezier(").concat(f,")");var l=!1;n>0&&(e.items[t+i].children[1].style.opacity="0"),e.items[t+i].addEventListener("transitionend",(function(a){l||(e._indicatorDisplay(t,n),e.items[t+r].children[1].style.opacity=o,e.items[t+i].children[1].style.transition="opacity 0.15s linear",l=!0)}),!1)},y=function(i,a,s,r,o){e.items[t+i].style.transform="translateX(".concat(a,"%)"),e.items[t+i].children[0].style.opacity=s,n>0&&(e.items[t+i].children[1].style.opacity="0"),e.items[t+r].children[1].style.opacity=o};if(i&&!this.isIE11?n>0?v(0,0,1,0,1):v(1,100,0,1,0):n>0?y(0,0,1,0,1):y(1,100,0,1,0),this._indicatorDisplay(t,n),this._displayManager(t),this.currentIndex=t,0===t?this.container.classList.add("beginning"):this.container.classList.remove("beginning"),t===this.items.length-1?this.container.classList.add("end"):this.container.classList.remove("end"),0!==p){var b=this.items[p].querySelector(".interstitial div");null!==b&&b.id in window._galleryInterstitial&&"function"==typeof window._galleryInterstitial[b.id]&&(window._galleryInterstitial[b.id](),delete window._galleryInterstitial[b.id])}}}},{key:"_setAnalytics",value:function(){var t="article-gallery-",e=this.gallery.dataset.guid;HDN.dataLayer&&HDN.dataLayer.content&&HDN.dataLayer.content.objectId&&(t+=HDN.dataLayer.content.objectId),"gallery"!==e&&(t="".concat(t,"-").concat(e)),this.analytics={title:this.gallery.dataset.title,slideshowId:e,articleId:t,objectId:HDN.dataLayer.content.objectId};var n,i=ft(this.shareButtons);try{for(i.s();!(n=i.n()).done;){var a=n.value,s=a.dataset.hdnAnalytics;if(void 0!==s){var r=s.indexOf("|"),o=[s.slice(0,r),"_gallery",s.slice(r)].join("");a.dataset.hdnAnalytics=o}}}catch(t){i.e(t)}finally{i.f()}}},{key:"_setEventListeners",value:function(){var t=this;this.gallery.addEventListener("click",this._handleClick.bind(this),!1),window.addEventListener("orientationchange",(function(e){t.gallery.classList.add("notransition"),setTimeout((function(){t.gallery.classList.remove("notransition"),0!==t.currentIndex&&(t.items[0].getElementsByTagName("figcaption")[0].style.height=t.items[t.currentIndex].getElementsByTagName("figcaption")[0].clientHeight+"px")}),200)}))}}]),a}(function(){function t(n,i){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"default",s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];e(this,t),this.debug="gallery"===l("debug")||"all"===l("debug"),this.gallery=n,this.uid=i,this.type=a,this.isIE11=s,this.total=parseFloat(n.dataset.total),this.worker,this.addList=[],this.batches=[],this.curretBatch=0,this.observer}return i(t,[{key:"_loadImages",value:function(t){var e,n=ft(t);try{for(n.s();!(e=n.n()).done;){var i=e.value;this.items[i]&&b(this.items[i])}}catch(t){n.e(t)}finally{n.f()}}},{key:"_sendAnalytics",value:function(t,e,n){try{Z._sendAnalyticsData("".concat(t,"|photo-").concat(e,"|").concat(this.type,"-").concat(this.gallery.dataset.id,"|").concat(n))}catch(t){console.error(t)}}}]),t}()),pt=function(t){D(a,t);var n=ht(a);function a(t,i){var s,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"default",o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return e(this,a),s=n.call(this,t,i,r,o),window.addEventListener("keyup",(function(e){if(s._isElementVisible(t))switch(e.keyCode){case 39:s._navigate(s.currentIndex+1,1);break;case 37:s._navigate(s.currentIndex-1,-1)}})),s}return i(a,[{key:"_isElementVisible",value:function(t){var e=t.getBoundingClientRect(),n=function(t,e){return document.elementFromPoint(t,e)};return!(e.right<0||e.bottom<0||e.left>window.innerWidth||e.top>window.innerHeight)&&(t.contains(n(e.left,e.top))||t.contains(n(e.right,e.top))||t.contains(n(e.right,e.bottom))||t.contains(n(e.left,e.bottom)))}}]),a}(gt),vt=function(t){D(a,t);var n=ht(a);function a(t,i){var s,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"default",o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return e(this,a),(s=n.call(this,t,i,r,o)).slideWidth=t.offsetWidth,s.curX=0,s.curY=0,s.isTouchStart=!1,s.isMoving=!1,s.longTouch=void 0,s.maxXOffset=0,s.minXOffset=0,s._navigatedX=0,s._navigatedY=0,s.startX=0,s.startY=0,s.container.addEventListener("touchstart",s.handleTouchStart.bind(X(s)),!0),s.container.addEventListener("touchmove",s._handleTouchMove.bind(X(s)),!0),s.container.addEventListener("touchcancel",s._handleTouchCancel.bind(X(s)),!0),s.container.addEventListener("touchend",s._handleTouchEnd.bind(X(s)),!0),s}return i(a,[{key:"_angleIsVertical",value:function(){var t=this.startX-this.curX,e=this.curY-this.startY,n=Math.round(180*Math.atan2(e,t)/Math.PI);return n<=-70&&n>=-110||n<=110&&n>=70}},{key:"_clamp",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.minXOffset,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.maxXOffset;return t<e?e:t>n?n:t}},{key:"_handleTouchCancel",value:function(t){this.isTouchStart=!1,this.startX=0,this.startY=0,this.curX=0,this.curY=0,this._navigate(this.currentIndex),this.isTouchMove=!1}},{key:"_handleTouchEnd",value:function(){if(this.isTouchStart=!1,this.container.classList.remove("notransition"),!this._angleIsVertical()){var t=100*(this._navigatedX/this.slideWidth).toFixed(2),e=this.currentIndex;(t>33||!1===this.longTouch)&&e+this.delta>-1&&(e+=this.delta),this.currentIndex+this.delta>-1&&this.currentIndex+this.delta<this.items.length&&!isNaN(t)&&this.isTouchMove&&this._navigate(e),this.isTouchMove=!1}}},{key:"_handleTouchMove",value:function(t){if(this.isTouchMove=!0,this.curX=t.touches[0].pageX,this.curY=t.touches[0].pageY,!this._angleIsVertical()){t.preventDefault(),this._navigatedX=Math.abs(this.startX-this.curX),this._navigatedY=Math.abs(this.startY-this.curY),this.delta=Math.sign(this.startX-this.curX);var e=this._clamp(100*(this._navigatedX/this.slideWidth).toFixed(2),0,100),n=(this._navigatedX/this.slideWidth).toFixed(2),i=this.delta<0?e:100-e,a=this.delta>0?n:1-n,s=this.delta<0?0:1;this._navigatedY<10&&this.currentIndex+this.delta>-1&&this.currentIndex+this.delta<this.items.length&&(this.items[this.currentIndex+s].style.transform="translateX(".concat(i,"%)"),this.items[this.currentIndex+s].children[0].style.opacity=a,this.items[this.currentIndex+s].children[1].style.opacity=0)}}},{key:"handleTouchStart",value:function(t){var e=this;t.stopPropagation(),this.isTouchStart=!0,this.container.classList.add("notransition"),this.startX=t.touches[0].pageX,this.startY=t.touches[0].pageY,this.indicators.classList.contains("show")||this.indicators.classList.add("show"),this.longTouch=!1,setTimeout((function(){e.longTouch=!0}),250)}}]),a}(gt),yt=new r("TOWNHALL","#f08080","#ffffff"),bt=function(){function t(n,i,a){e(this,t),this.debug="townhall"===l("debug")||"all"===l("debug"),this.displayed=!1,this.site=n,this.TOWNHALL={},this.type=a,this.uid=i}return i(t,[{key:"init",value:function(t){var e=this;this._setTiming(),window.addEventListener("TOWNHALL",(function(t){e._message(t)})),t("function"==typeof CustomEvent&&"IntersectionObserver"in window)}},{key:"_message",value:function(t){switch(Object.keys(t.detail)[0]){case"channelBodyScrollProgress":break;case"revenue":t.detail.revenue.hasOwnProperty("refresh")?f("revenue",{refresh:!0}):this._processAds(t.detail.revenue);break;case"scrollWatcher":this._renderElementInView(t.detail.scrollWatcher);break;case"scrollStates":var e=parseFloat(t.detail.scrollStates.element.dataset.index);e<2?document.getElementsByClassName("pageHeader")[0].dataset.stage=e:document.getElementsByClassName("pageHeader")[0].classList.contains("noNext")?this.debug&&yt.log("No remaining articles in the ribbon. Cannot display the next story feature"):document.getElementById("nextStory").hasChildNodes()&&(document.getElementsByClassName("pageHeader")[0].dataset.stage=e);break;default:this.debug&&yt.warn("Monitor could not interrupt the returned Event - ".concat(Object.keys(t.detail)[0]))}}},{key:"_refreshData",value:function(){var t=sessionStorage.TOWNHALL?sessionStorage.TOWNHALL:(Object.assign(this.TOWNHALL),delete this.TOWNHALL),e=new Date;t.timestamp="".concat(e.getHours(),":").concat(e.getMinutes(),":").concat(e.getSeconds(),":").concat(e.getMilliseconds()),this._displayData(t)}},{key:"_displayData",value:function(t){try{for(var e=function(t){return"<span>".concat(t,"</span>")},n=function(t){return t.join(", ")},i=function t(i){for(var a=["<table>"],s=0,r=Object.entries(i);s<r.length;s++){var o=et(r[s],2),l=o[0],c=o[1],d="string"==typeof c||"boolean"==typeof c?e(c):Array.isArray(c)?n(c):t(c);a.push("<tr><td><span>".concat(l,"</span></td> <td><span>").concat(d,"</span></td></tr>"))}return a.push("</table>"),a.join("")},a=['<table><tr><th><span>LISTENER</span></th><th><span>RESPONSE</span><button id="buttonClose" class="btn close"></button></th></tr>'],s=0,r=Object.entries(t);s<r.length;s++){var o=et(r[s],2),l=o[0],c=o[1],d="string"==typeof c||"number"==typeof c||"boolean"==typeof c?e(c):Array.isArray(c)?n(c):i(c);a.push("<tr><td><span>".concat(l,"</span></td> <td>").concat(d,"</td></tr>"))}a.push("</table>"),document.getElementById("monitorData").innerHTML=a.join("")}catch(t){this.debug&&yt.warn(t)}}},{key:"_processAds",value:function(t){var e=this;Object.keys(t).forEach((function(n){e.TOWNHALL.revenue[n]=t[n]}))}},{key:"_renderElementInView",value:function(t){var e=t.element.dataset.component||!1;if(e)switch(this.debug&&yt.log("Rendered ".concat(e," as it came into view.")),e){case"embed-comments":Q.load(t.element);break;case"carousel":for(var n=0,i=Array.from(t.element.querySelectorAll("[data-progressive]"));n<i.length;n++)b(i[n]);break;case"misc-embed-script":var a=document.createElement("script");a.src=t.element.dataset.js,c(a,t.element.previousElementSibling),t.element.parentNode.removeChild(t.element);break;case"misc-iframe":t.element.setAttribute("src",t.element.dataset.url),t.element.removeAttribute("data-component"),t.element.removeAttribute("data-progressive"),t.element.removeAttribute("data-url");break;case"picture":var s=parseFloat(t.element.parentElement.dataset.slideNumber);b(t.element),"slideshow"===this.type&&s%5==0&&window.dispatchEvent(new CustomEvent(this.uid,{bubbles:!0,detail:"nextBatch"})),b(t.element);break;case"taboola":t.element.removeAttribute("data-component"),t.element.removeAttribute("data-progressive"),function(t){var e=t.children[0];console.log(e),e&&(t.parentNode.dataset.status="loaded");var n="Mid Content Thumbnails";try{window._taboolaNetworkMode&&(n="".concat(n," - Redesign"))}catch(t){console.error(t.message)}window._taboola=window._taboola||[],_taboola.push({mode:"thumbnails-e",container:e,placement:n,target_type:"mix"}),_taboola.push({flush:!0})}(t.element);break;case"video":new wt(t.element).init()}}},{key:"_setTiming",value:function(){var t=this,e=new Date,n="article"===this.type||"slideshow"===this.type?window.Article:window.Channel,i=n.timing.ready-n.timing.firstbyte;this.TOWNHALL.timestamp="".concat(e.getHours(),":").concat(e.getMinutes(),":").concat(e.getSeconds(),":").concat(e.getMilliseconds()),this.TOWNHALL.DOM={},this.TOWNHALL.DOM.ready="".concat(i/1e3," sec"),window.addEventListener("load",(function(){t.TOWNHALL.DOM.complete="".concat(Number(new Date-HDN.t_firstbyte)/1e3," sec")}))}}]),t}(),wt=function(){function t(n){e(this,t),this.element=n}return i(t,[{key:"init",value:function(){var t=this.element,e=t.getAttribute("data-src")||!1,n=t.getElementsByClassName("hearstPlayer"),i=t.getElementsByTagName("video"),a=t.getElementsByClassName("hearst-jwplayer");if(e)this.loadIframeEl(t,e);else if(n.length)this.loadEmbedEl();else if(i.length)this.loadVideoEl(t);else if(a.length){var s=window.HDN||{};s.jwplayer=s.jwplayer||{},s.jwplayers=s.jwplayers||{},this.loadJwPlayer(a[0],t)}}},{key:"loadJwPlayer",value:function(t,e){u("/js/hdn/video/jwplayer.js");var n=e.getElementsByClassName("filmstrip-negative");n.length>0&&this.addPlaylistListener(n[0])}},{key:"loadIframeEl",value:function(t,e){var n=t.querySelector("div.holder");n&&w(n);var i=t.getElementsByTagName("iframe");i.length>0&&i[0].setAttribute("src",e),t.classList.add("loaded"),window.setTimeout((function(){t.style.height="auto"}),2345)}},{key:"loadEmbedEl",value:function(){var t=window.HDN||{};t.mediaOSLoaded||(u("//player.hearst.io/player.js"),window.hdsCustomSetting=window.hdsCustomSetting||{},window.hdsCustomSetting.onLoaded=function(e){if(!t.videoMOSAdTag||!window.hdsCustomSetting.ad){try{t.videoMOSAdTag=hearstGetVideoAdTag("Video_MOS")}catch(e){t.videoMOSAdTag=null}t.videoMOSAdTag&&e.setImaAd(t.videoMOSAdTag)}},t.mediaOSLoaded=!0)}},{key:"loadVideoEl",value:function(t){var e=t.querySelectorAll("[data-src]")||[],n=t.getAttribute("data-poster-src");n&&(t.poster=n);for(var i=0;i<e.length;i++)e[i].src=e[i].getAttribute("data-src");t.load(),t.play()}},{key:"s2nCleanUp",value:function(t){var e=t.parentElement;e&&e.classList.add("no-before");var n=e.getElementsByClassName("preloader");n.length&&w(n[0])}},{key:"addPlaylistListener",value:function(t){var e=t.getElementsByClassName("filmstrip__nav-next")[0],n=t.getElementsByClassName("filmstrip__nav-prev")[0],i=t.getElementsByTagName("ul")[0],a=100;768===window.innerWidth?a=105:window.innerWidth<768&&(a=97),["click","touch"].forEach((function(t){n.addEventListener(t,(function(t){var e=parseInt(i.getAttribute("data-translateX"),10)+a;e=e>0?0:e,i.setAttribute("data-translateX",e),i.style.transform="translateX("+e+"%)"})),e.addEventListener(t,(function(t){var e=i.getAttribute("data-translateX")-a,n=i.scrollWidth/i.offsetWidth,s=parseInt(n,10);e=e<(s=(n-s==0?s-1:s)*-a)?s:e,i.setAttribute("data-translateX",e),i.style.transform="translateX("+e+"%)"}))}))}}]),t}(),Et=function(){function t(){e(this,t),this.markers=[],this.markers.push(0),this.markers.push(window.innerHeight+1),this.markers.push(Math.floor(1.5*window.innerHeight))}return i(t,[{key:"init",value:function(){window.scrollStates=new p(this.markers,"scrollStates","0px 0px 0px 0px",!0,!0),window.scrollStates.init()}}]),t}(),Lt=function(){function t(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"progressStates";e(this,t),this.markers=["0%","25%","50%","75%","100%"],this.eventName=i,this.root=n}return i(t,[{key:"init",value:function(){window.progressStates=new p(this.markers,this.eventName,"0px 0px 0px 0px",!0,!1,this.root),window.progressStates.init()}}]),t}();function _t(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return kt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?kt(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,a=function(){};return{s:a,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,r=!0,o=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return r=t.done,t},e:function(t){o=!0,s=t},f:function(){try{r||null==n.return||n.return()}finally{if(o)throw s}}}}function kt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var St=new r("ARTICLE","#191970","#ffffff"),At=function(){function t(n,i,a){var s,r=this;e(this,t),this.activeSession="undefined"!==treg&&treg.identity.isEntitled,this.debug="article"===l("debug")||"all"===l("debug"),this.isIE11=a,this.site=n,this.uid=i,(s=new bt(n,i,"article")).init((function(t){r.debug&&(t?(St.log("Monitor ".concat(i," initialized.")),window.Article.monitor=s):St.warn("No monitor initialized for this article"))})),Object.prototype.hasOwnProperty.call(HDN,"activeABTest")&&r.debug&&St.log("There is an AB Test (".concat(HDN.activeABTest,") running on this article.")),window.Article.isSensitive?St.error("Article Tragedy Flag set"):Object.prototype.hasOwnProperty.call(HDN.dataLayer,"revenueProfiles")&&Object.prototype.hasOwnProperty.call(HDN.dataLayer.revenueProfiles,"profiles")?new J(HDN.dataLayer.revenueProfiles.profiles,"article",r.activeSession,i).init((function(t){HDN.dataLayer.ads.loaded=t,r.debug&&(t?St.log("Revenue profile ".concat(i," initialized.")):St.error("Revenue profile not initialized"))})):St.error("No revenue profile assigned")}return i(t,[{key:"init",value:function(){this._addEvents(),this._initCollections(document.querySelectorAll('[data-component="collection"]')),this._initFactBox(document.getElementsByClassName("factBox")),this._initGalleries(document.getElementsByClassName("gallery")),this._initMasthead(),this._initScrollStates(),Z.init(),K.init(),this._relatedLinks(window.Article.renderNLP,document.getElementsByClassName("relatedStories")[0]||!1),ot.init(this.site,"article",this.uid),function(){var t,e,n,i=window.HDN||!1;i&&(t=i,e="".concat(location.protocol,"//p.ctpost.com/"),n=i.dataLayer.site.name,(t=t.dataLayer||{}).content&&t.content.objectType&&(e+="".concat(t.content.objectType,"?")),t.content&&t.content.objectId&&(e+="i=".concat(t.content.objectId,"&")),n&&(e+="s=".concat(n,"&")),e+="ts=".concat(Number(new Date)),(new Image).src=e)}(),st(),R(),d("/css/treg.main.css",!0);var t=window.HDN;if(Object.prototype.hasOwnProperty.call(t,"dataLayer")&&Object.prototype.hasOwnProperty.call(t.dataLayer,"content")&&Object.prototype.hasOwnProperty.call(t.dataLayer.content,"objectType")&&"articleComments"===t.dataLayer.content.objectType){var e=document.getElementById("article-comments");e&&(e.removeAttribute("data-component"),e.removeAttribute("data-progressive"),Q.load(e))}}},{key:"_addEvents",value:function(){this._onFirstInteraction=this._onFirstInteraction.bind(this),window.addEventListener("mousedown",this._onFirstInteraction,!1),window.addEventListener("scroll",this._onFirstInteraction,!1)}},{key:"_createObserver",value:function(t){window.scrollWatcher=new p(t,"scrollWatcher","0px 0px ".concat(window.innerHeight/2,"px 0px")),window.scrollWatcher.init()}},{key:"_detectTouch",value:function(){return"ontouchstart"in document.documentElement&&(window.USER_TOUCH=!0),"ontouchstart"in document.documentElement}},{key:"_initCollections",value:function(t){if(t.length){var e,n=_t(t);try{for(n.s();!(e=n.n()).done;){var i=e.value;switch(i.dataset.collectionType){case"ribbon":window.innerWidth>=768&&new s(i,{speed:500,scrollingOneByOne:!1,touch:!1,click:!0,effect:"ease",slide:!0},this.uid).init()}}}catch(t){n.e(t)}finally{n.f()}}}},{key:"_initFactBox",value:function(t){if(t){var e,n=_t(t);try{for(n.s();!(e=n.n()).done;)lt(e.value)}catch(t){n.e(t)}finally{n.f()}}}},{key:"_initGalleries",value:function(t){if(t.length){var e,n=_t(t);try{for(n.s();!(e=n.n()).done;){var i=e.value;(this._detectTouch()&&window.innerWidth<=1024?new vt(i,this.uid,i.dataset.layout,this.isIE11):new pt(i,this.uid,i.dataset.layout,this.isIE11)).init()}}catch(t){n.e(t)}finally{n.f()}}}},{key:"_initMasthead",value:function(){this._detectTouch()&&document.getElementsByTagName("body")[0].classList.add("touch");var t=document.getElementsByTagName("body")[0].dataset.location.split(" "),e=document.getElementsByClassName("pageHeader")[0];new ut(e,t[0],this.activeSession,this.site).init()}},{key:"_initScrollStates",value:function(){(new Et).init();var t=document.getElementsByClassName("article--content")[0];t&&(t.style.position="relative",new Lt(t,"articleBodyScrollProgress").init())}},{key:"_loadPictureFill",value:function(){d("/css/core/nogrid/article.css",!0);var t,e=[],n=_t(document.querySelectorAll("[data-progressive]"));try{for(n.s();!(t=n.n()).done;){var i=t.value;"picture"===i.dataset.component&&e.push(i)}}catch(t){n.e(t)}finally{n.f()}!function(t){var e=!1;document.addEventListener("scroll",(function n(){e||(e=!e,setTimeout((function(){t.forEach((function(e){e.getBoundingClientRect().top<=window.innerHeight&&e.getBoundingClientRect().bottom>=0&&"none"!==getComputedStyle(e).display&&(e.getElementsByTagName("img")[0].src=e.getElementsByTagName("img")[0].getAttribute("data-src"),e.removeAttribute("data-progressive"),e.removeAttribute("data-component"),e.classList.add("fade-in"),e.classList.remove("deferred"),0===(t=t.filter((function(t){return t!==e}))).length&&(document.removeEventListener("scroll",n),window.removeEventListener("resize",n),window.removeEventListener("orientationchange",n)))})),e=!e}),500))}))}(e)}},{key:"_onFirstInteraction",value:function(){this.isIE11?this._loadPictureFill():this._createObserver(document.querySelectorAll("[data-progressive]")),window.Article.firstInteraction=!0,window.removeEventListener("mousedown",this._onFirstInteraction,!1),window.removeEventListener("scroll",this._onFirstInteraction,!1)}},{key:"_relatedLinks",value:function(t,e){var n=window.HDN.dataLayer.content.objectId||!1,i=window.HDN.dataLayer.site.siteId||!1;e?window.innerWidth>=768&&new s(e,{speed:500,scrollingOneByOne:!1,touch:!1,click:!0,effect:"ease"},this.uid).init():t&&n&&i?new at(n,i,this.uid):this.debug&&St.log("There are no manually placed related articles and/or NLP results have been disabled")}}]),t}();document.addEventListener("DOMContentLoaded",(function(){new At("newstimes",function(t){for(var e="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n="",i=32;i>0;--i)n+=e[Math.round(Math.random()*(e.length-1))];return n}(),/MSIE \d|Trident.*rv:/.test(navigator.userAgent)).init()}))}()}();