$(document).ready(function(){var s=700;var f=3;var a=3;var m=[];var u=0;var x=pjm.data("blog-id");var h=pjm.data("post-id");var n=pjm.data("page-type");var c=x+"-"+h;console.log("::init for id "+c);try{pjm.htmlbuddy.changeExternalLinksToNewWindow(".article-content")}catch(y){console.log("::init","exception changing links",y)}if($("body").data("disable-ads")){i()}else{i()}var q=pjm.data("number-of-pages");if(q>1){$("#pagebuilder-page-0").append('<div class="pagebuilder-page-fadeout"></div>');$(".article-load-more-button").removeAttr("disabled")}else{$(".article-load-more-button").attr("disabled","disabled")}k();d();p();b();t();try{if(n==="s"){if(pjm.dataExists("entry-id")){}else{if(pjm.debug){console.log("::init setting up article reload")}pjm.reloadbuddy.autoVirtualPageView(window.location,document.title,900)}}}catch(y){console.log("::init","exception setting up reload",y)}var w=[];if(!$("body").data("disable-ads")){if(pjm.breakpointbuddy.isBreakpoint("desktop")){}else{if(pjm.breakpointbuddy.isBreakpoint("tablet")){}else{}}}var r=new pjm.masonryInstance({containerId:"#article-sidebar",tileClass:".masonry-tile",pins:w});r.clawLimit=3;PJHelper.formatDates();$(window).on("breakpoint-change",t);try{$(".audio-video-player").mediaelementplayer()}catch(y){}function i(){if($("body").data("disable-ads")||$("body").data("piano-resources")){return}var e=[];e[0]=o();e[1]=l();e[2]=j();s=pjm.data("characters-between-embedded-article-ad",s);f=pjm.data("minimum-embedded-article-ad-paragaph-spacing",f);a=pjm.data("maximum-embedded-ads",a);pjm.adbuddy.embedArticleAds(e,s,f,a)}function j(){var B="";var A="";if(pjm.breakpointbuddy.isBreakpoint("mobile")){B="div-gpt-300x250_7";A="/6177/pjmedia/article/300x250_7"}else{if(pjm.breakpointbuddy.isBreakpoint("mobile")){B="div-gpt-300x250_7";A="/6177/pjmedia/article/300x250_7"}else{B="div-gpt-300x250_7";A="/6177/pjmedia/article/300x250_7"}}var e='<div id="adSlot-6" class="article-inline-ad-container"><div id="'+B+'" class="gpt-ad article-inline-ad"></div></div>';return{id:B,adSlot:new AdSlot(A,300,250),html:e}}function l(){var B="";var A="";if(pjm.breakpointbuddy.isBreakpoint("mobile")){B="div-gpt-300x250_6";A="/6177/pjmedia/article/300x250_6"}else{if(pjm.breakpointbuddy.isBreakpoint("mobile")){B="div-gpt-300x250_6";A="/6177/pjmedia/article/300x250_6"}else{B="div-gpt-300x250_6";A="/6177/pjmedia/article/300x250_6"}}var e='<div id="adSlot-5" class="article-inline-ad-container"><div id="'+B+'" class="gpt-ad article-inline-ad"></div></div>';return{id:B,adSlot:new AdSlot(A,300,250),html:e}}function o(){var B="";var A="";if(pjm.breakpointbuddy.isBreakpoint("mobile")){B="div-gpt-300x250_5";A="/6177/pjmedia/article/300x250_5"}else{if(pjm.breakpointbuddy.isBreakpoint("mobile")){B="div-gpt-300x250_5";A="/6177/pjmedia/article/300x250_5"}else{B="div-gpt-300x250_5";A="/6177/pjmedia/article/300x250_5"}}var e='<div id="adSlot-4" class="article-inline-ad-container"><div id="'+B+'" class="gpt-ad article-inline-ad"></div></div>';return{id:B,adSlot:new AdSlot(A,300,250),html:e}}function g(){}function k(){var e=$(".article-image img").data("caption");$(".article-featured-image-caption").html(e);$(".article-image img").show()}function b(){$(".alignnone").each(function(){$(this).css("width",Math.min($(".content").width(),$(this).children("img").attr("width")))})}function d(){pjm.socialmediabuddy.getFacebookArticleShares($("body").data("sharing-urls"),$("body").data("facebook-extra-shares"))}function p(){if(pjm.breakpointbuddy.isBreakpoint("mobile")){$(".editors-choice").detach().insertBefore("#piano_article_bottom_recommended_container")}}function t(){var C=$(".byline > .author-picture").width()+$(".byline > .author").width()+parseInt($(".byline > .author").css("margin-left")),A=$(".byline > .comment-link").width(),B=$(".byline").width();if(C+A>B){var e=$(".byline > .author-picture").length>0?"comment-link-new-line-image":"comment-link-new-line-no-image";$(".byline > .comment-link").addClass(e)}else{$(".byline > .comment-link").removeClass("comment-link-new-line-image").removeClass("comment-link-new-line-no-image")}}function v(B){$("#pagebuilder-page-"+B).show();PJHelper.formatDates();try{$("#pagebuilder-page-"+B+" .audio-video-player").mediaelementplayer()}catch(C){}try{pjm.htmlbuddy.changeExternalLinksToNewWindow(".article-content")}catch(C){console.log("::showPage","exception changing links",C)}pjm.contentfilters.redoContentFilters();try{i()}catch(C){console.log("article.js::showPage","exception adding embedded article ads",C)}$(".pagebuilder-page-fadeout").remove();$("#pagebuilder-page-"+B).append('<div class="pagebuilder-page-fadeout"></div>');try{var A=pjm.urlbuddy.getVirtualUrl((B+1));var D=$("title").text();pjm.gabuddy.sendPageView(A,D)}catch(C){console.log("article.js::showPage","exception sending pageview",C)}try{}catch(C){console.log("article.js::showPage","exception reloading ads",C)}try{if(typeof OBR!=="undefined"&&typeof OBR.extern!=="undefined"&&typeof OBR.extern.refreshWidget!=="undefined"){OBR.extern.refreshWidget()}}catch(C){console.log("article.js::showPage","exception reloading outbrain",C)}if(u>=(q-1)){$(".article-load-more-button").attr("disabled","disabled");$(".pagebuilder-page-fadeout").remove()}}function z(){var e=pjm.data("canonical-url","");if(e===""){return}if(e.indexOf("/",e.length-"/".length)==-1){e+="/"}e+="more";if($("#preview-more-url").length>0){e=$("#preview-more-url").val()}$.ajax({url:e}).done(function(B){try{m=B;for(var A in m){if(A==0){}else{$(".content .pages").append(m[A])}}v(u)}catch(C){console.log("article.js::getPages","exception getting pages",C)}})}$(".article-load-more-button").on("click",function(){if(q>1){u++;if(m.length==0){z()}else{v(u)}}})});